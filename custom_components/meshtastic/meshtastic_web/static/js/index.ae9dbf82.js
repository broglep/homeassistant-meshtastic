(()=>{"use strict";var e={5069:function(e,t,a){var n=a("2676"),l=a("9253");a("9686");var i=a("5271"),s=a("8751"),o=a("2741"),r=a("9752");let d=(0,o.Ue)((e,t)=>({devices:new Map,remoteDevices:new Map,addDevice:a=>{e((0,l.Uy)(t=>{t.devices.set(a,{id:a,status:r.Yk.DeviceStatusEnum.DeviceDisconnected,channels:new Map,config:new r.Bj.LocalOnly.LocalConfig,moduleConfig:new r.Bj.LocalOnly.LocalModuleConfig,workingConfig:[],workingModuleConfig:[],hardware:new r.Bj.Mesh.MyNodeInfo,nodes:new Map,metadata:new Map,messages:{direct:new Map,broadcast:new Map},traceroutes:new Map,connection:void 0,activePage:"messages",activeNode:0,waypoints:[],dialog:{import:!1,QR:!1,shutdown:!1,reboot:!1,deviceName:!1,nodeRemoval:!1},pendingSettingsChanges:!1,messageDraft:"",setStatus:t=>{e((0,l.Uy)(e=>{let n=e.devices.get(a);n&&(n.status=t)}))},setConfig:t=>{e((0,l.Uy)(e=>{let n=e.devices.get(a);if(n)switch(t.payloadVariant.case){case"device":n.config.device=t.payloadVariant.value;break;case"position":n.config.position=t.payloadVariant.value;break;case"power":n.config.power=t.payloadVariant.value;break;case"network":n.config.network=t.payloadVariant.value;break;case"display":n.config.display=t.payloadVariant.value;break;case"lora":n.config.lora=t.payloadVariant.value;break;case"bluetooth":n.config.bluetooth=t.payloadVariant.value;break;case"security":n.config.security=t.payloadVariant.value}}))},setModuleConfig:t=>{e((0,l.Uy)(e=>{let n=e.devices.get(a);if(n)switch(t.payloadVariant.case){case"mqtt":n.moduleConfig.mqtt=t.payloadVariant.value;break;case"serial":n.moduleConfig.serial=t.payloadVariant.value;break;case"externalNotification":n.moduleConfig.externalNotification=t.payloadVariant.value;break;case"storeForward":n.moduleConfig.storeForward=t.payloadVariant.value;break;case"rangeTest":n.moduleConfig.rangeTest=t.payloadVariant.value;break;case"telemetry":n.moduleConfig.telemetry=t.payloadVariant.value;break;case"cannedMessage":n.moduleConfig.cannedMessage=t.payloadVariant.value;break;case"audio":n.moduleConfig.audio=t.payloadVariant.value;break;case"neighborInfo":n.moduleConfig.neighborInfo=t.payloadVariant.value;break;case"ambientLighting":n.moduleConfig.ambientLighting=t.payloadVariant.value;break;case"detectionSensor":n.moduleConfig.detectionSensor=t.payloadVariant.value;break;case"paxcounter":n.moduleConfig.paxcounter=t.payloadVariant.value}}))},setWorkingConfig:t=>{e((0,l.Uy)(e=>{let n=e.devices.get(a);if(!n)return;let l=null==n?void 0:n.workingConfig.findIndex(e=>e.payloadVariant.case===t.payloadVariant.case);-1!==l?n.workingConfig[l]=t:null==n||n.workingConfig.push(t)}))},setWorkingModuleConfig:t=>{e((0,l.Uy)(e=>{let n=e.devices.get(a);if(!n)return;let l=null==n?void 0:n.workingModuleConfig.findIndex(e=>e.payloadVariant.case===t.payloadVariant.case);-1!==l?n.workingModuleConfig[l]=t:null==n||n.workingModuleConfig.push(t)}))},setHardware:t=>{e((0,l.Uy)(e=>{let n=e.devices.get(a);n&&(n.hardware=t)}))},setActivePage:t=>{e((0,l.Uy)(e=>{let n=e.devices.get(a);n&&(n.activePage=t)}))},setPendingSettingsChanges:t=>{e((0,l.Uy)(e=>{let n=e.devices.get(a);n&&(n.pendingSettingsChanges=t)}))},addChannel:t=>{e((0,l.Uy)(e=>{let n=e.devices.get(a);if(!!n)n.channels.set(t.index,t)}))},addWaypoint:t=>{e((0,l.Uy)(e=>{let n=e.devices.get(a);if(n){let e=n.waypoints.findIndex(e=>e.id===t.id);-1!==e?n.waypoints[e]=t:n.waypoints.push(t)}}))},addNodeInfo:t=>{e((0,l.Uy)(e=>{let n=e.devices.get(a);if(!!n)n.nodes.set(t.num,t)}))},setActiveNode:t=>{e((0,l.Uy)(e=>{let n=e.devices.get(a);n&&(n.activeNode=t)}))},addUser:t=>{e((0,l.Uy)(e=>{let n=e.devices.get(a);if(!n)return;let l=n.nodes.get(t.from)??new r.Bj.Mesh.NodeInfo;l.user=t.data,n.nodes.set(t.from,l)}))},addPosition:t=>{e((0,l.Uy)(e=>{let n=e.devices.get(a);if(!n)return;let l=n.nodes.get(t.from)??new r.Bj.Mesh.NodeInfo;l.position=t.data,n.nodes.set(t.from,l)}))},addConnection:t=>{e((0,l.Uy)(e=>{let n=e.devices.get(a);n&&(n.connection=t)}))},addMessage:t=>{e((0,l.Uy)(e=>{let n=e.devices.get(a);if(!n)return;let l=n.messages[t.type],i="direct"===t.type?t.from===n.hardware.myNodeNum?t.to:t.from:t.channel,s=l.get(i);s?(s.push(t),l.set(i,s)):l.set(i,[t])}))},addMetadata:(t,n)=>{e((0,l.Uy)(e=>{let l=e.devices.get(a);if(!!l)l.metadata.set(t,n)}))},addTraceRoute:t=>{e((0,l.Uy)(e=>{console.log("addTraceRoute called"),console.log(t);let n=e.devices.get(a);if(!n)return;let l=n.traceroutes.get(t.from);l?(l.push(t),n.traceroutes.set(t.from,l)):n.traceroutes.set(t.from,[t])}))},removeNode:t=>{e((0,l.Uy)(e=>{let n=e.devices.get(a);if(!!n)n.nodes.delete(t)}))},setMessageState:(t,n,i,s,o,r)=>{e((0,l.Uy)(e=>{console.log("setMessageState called");let l=e.devices.get(a);if(!l){console.log("no device found for id");return}let d=l.messages[t],c="direct"===t?s===l.hardware.myNodeNum?i:s:n,u=d.get(c);if(!u){console.log("no messages found for id");return}d.set(c,u.map(e=>(e.id===o&&(e.state=r),e)))}))},setDialogOpen:(t,n)=>{e((0,l.Uy)(e=>{let l=e.devices.get(a);if(!!l)l.dialog[t]=n}))},processPacket(t){e((0,l.Uy)(e=>{let n=e.devices.get(a);if(!n)return;let l=n.nodes.get(t.from);l?n.nodes.set(t.from,{...l,lastHeard:t.time,snr:t.snr}):n.nodes.set(t.from,new r.Bj.Mesh.NodeInfo({num:t.from,lastHeard:t.time,snr:t.snr}))}))},setMessageDraft:t=>{e((0,l.Uy)(e=>{let n=e.devices.get(a);n&&(n.messageDraft=t)}))}})}));let n=t().devices.get(a);if(!n)throw Error("Device not found");return n},removeDevice:t=>{e((0,l.Uy)(e=>{e.devices.delete(t)}))},getDevices:()=>Array.from(t().devices.values()),getDevice:e=>t().devices.get(e)})),c=(0,i.createContext)(void 0),u=()=>{let e=(0,i.useContext)(c);if(void 0===e)throw Error("useDevice must be used within a DeviceProvider");return e},m=e=>{let{children:t,device:a}=e;return(0,n.jsx)(c.Provider,{value:a,children:t})};var p=a("995"),f=a("4461"),g=a("6664");function b(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,g.m6)((0,f.W)(t))}let h=p.fC,x=i.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)(p.aV,{ref:t,className:b("inline-flex flex-wrap items-center rounded-md bg-slate-100 p-1 mt-2 dark:bg-slate-800",a),...l})});x.displayName=p.aV.displayName;let v=i.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)(p.xz,{className:b("inline-flex min-w-[100px] items-center justify-center rounded-[0.185rem] px-3 py-1.5  text-sm font-medium text-slate-700 transition-all  disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-slate-900 data-[state=active]:shadow-sm dark:text-slate-200 dark:data-[state=active]:bg-slate-900 dark:data-[state=active]:text-slate-100",a),...l,ref:t})});v.displayName=p.xz.displayName;let y=i.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)(p.VY,{className:b("mt-2 rounded-md border border-slate-200 p-6 dark:border-slate-700",a),...l,ref:t})});y.displayName=p.VY.displayName;var j=a("3107");let N=(0,j.j)("flex h-10 w-full rounded-md border bg-transparent py-2 px-3 text-sm placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:text-slate-50 dark:focus:ring-slate-400 dark:focus:ring-offset-slate-900",{variants:{variant:{default:"border-slate-300 dark:border-slate-700",invalid:"border-red-500 dark:border-red-500"}},defaultVariants:{variant:"default"}}),w=i.forwardRef((e,t)=>{let{className:a,value:l,variant:i,prefix:s,suffix:o,action:r,...d}=e;return(0,n.jsxs)("div",{className:"relative w-full",children:[s&&(0,n.jsx)("span",{className:"inline-flex items-center rounded-l-md bg-backgroundPrimary px-3 font-mono text-sm text-textSecondary brightness-hover",children:s}),(0,n.jsx)("input",{className:b(r&&"pr-8",a,N({variant:i})),value:l,ref:t,...d}),o&&(0,n.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-9 font-mono text-textSecondary",children:(0,n.jsx)("span",{className:"text-gray-500 sm:text-sm",children:o})}),r&&(0,n.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500 hover:text-gray-400 focus:outline-none ",onClick:r.onClick,children:(0,n.jsx)(r.icon,{size:20})})]})});w.displayName="Input";var C=a("5659"),S=a("1347"),k=a("8260");function M(e){let{control:t,disabled:a,field:l}=e,[s,o]=(0,i.useState)(!1),r=()=>{o(!s)};return(0,n.jsx)(k.Qr,{name:l.name,control:t,render:e=>{var t;let{field:{value:i,onChange:o,...d}}=e;return(0,n.jsx)(w,{type:"password"===l.type&&s?"text":l.type,action:"password"===l.type?{icon:s?C.Z:S.Z,onClick:r}:void 0,step:null===(t=l.properties)||void 0===t?void 0:t.step,value:"number"===l.type?Number.parseFloat(i):i,onChange:e=>{l.inputChange&&l.inputChange(e),o("number"===l.type?Number.parseFloat(e.target.value):e.target.value)},...l.properties,...d,disabled:a})}})}let B=(0,j.j)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-offset-2 dark:hover:bg-slate-800 dark:hover:text-slate-100 disabled:opacity-50 dark:focus:ring-slate-400 disabled:pointer-events-none dark:focus:ring-offset-slate-900 data-[state=open]:bg-slate-100 dark:data-[state=open]:bg-slate-800",{variants:{variant:{default:"bg-slate-900 text-white hover:bg-slate-700 dark:bg-slate-50 dark:text-slate-900",destructive:"bg-red-500 text-white hover:bg-red-600 dark:hover:bg-red-600",success:"bg-green-500 text-white hover:bg-green-600 dark:hover:bg-green-600",outline:"bg-transparent border border-slate-200 hover:bg-slate-100 dark:border-slate-700 dark:text-slate-100",subtle:"bg-slate-100 text-slate-900 hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-100",ghost:"bg-transparent hover:bg-slate-100 dark:hover:bg-slate-800 dark:text-slate-100 dark:hover:text-slate-100 data-[state=open]:bg-transparent dark:data-[state=open]:bg-transparent",link:"bg-transparent underline-offset-4 hover:underline text-slate-900 dark:text-slate-100 hover:bg-transparent dark:hover:bg-transparent"},size:{default:"h-10 py-2 px-4",sm:"h-9 px-2 rounded-md",lg:"h-11 px-8 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),P=i.forwardRef((e,t)=>{let{className:a,variant:l,size:i,...s}=e;return(0,n.jsx)("button",{type:"button",className:b(B({variant:l,size:i,className:a})),ref:t,...s})});P.displayName="Button";var T=a("3307"),E=a("9142"),R=a("5765");let I=T.fC;T.ZA;let D=T.B4,A=i.forwardRef((e,t)=>{let{className:a,children:l,...i}=e;return(0,n.jsxs)(T.xz,{ref:t,className:b("flex h-10 w-full items-center justify-between rounded-md border border-slate-300 bg-transparent py-2 px-3 text-sm placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-slate-700 dark:text-slate-50 dark:focus:ring-slate-400 dark:focus:ring-offset-slate-900",a),...i,children:[l,(0,n.jsx)(E.Z,{className:"h-4 w-4 opacity-50"})]})});A.displayName=T.xz.displayName;let _=i.forwardRef((e,t)=>{let{className:a,children:l,...i}=e;return(0,n.jsx)(T.h_,{children:(0,n.jsx)(T.VY,{ref:t,className:b("relative z-50 min-w-[8rem] overflow-hidden rounded-md border border-slate-100 bg-white text-slate-700 shadow-md animate-in fade-in-80 dark:border-slate-800 dark:bg-slate-800 dark:text-slate-400",a),...i,children:(0,n.jsx)(T.l_,{className:"p-1",children:l})})})});_.displayName=T.VY.displayName,i.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)(T.__,{ref:t,className:b("py-1.5 pr-2 pl-8 text-sm font-semibold text-slate-900 dark:text-slate-300",a),...l})}).displayName=T.__.displayName;let V=i.forwardRef((e,t)=>{let{className:a,children:l,...i}=e;return(0,n.jsxs)(T.ck,{ref:t,className:b("relative flex cursor-default select-none items-center rounded-sm py-1.5 pr-2 pl-8 text-sm font-medium outline-none focus:bg-slate-100 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-slate-700",a),...i,children:[(0,n.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,n.jsx)(T.wU,{children:(0,n.jsx)(R.Z,{className:"h-4 w-4"})})}),(0,n.jsx)(T.eT,{children:l})]})});V.displayName=T.ck.displayName,i.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)(T.Z0,{ref:t,className:b("-mx-1 my-1 h-px bg-slate-100 dark:bg-slate-700",a),...l})}).displayName=T.Z0.displayName;let O=i.forwardRef((e,t)=>{let{type:a,devicePSKBitCount:l,variant:s,value:o,buttonText:r,bits:d=[{text:"256 bit",value:"32",key:"bit256"},{text:"128 bit",value:"16",key:"bit128"},{text:"8 bit",value:"1",key:"bit8"}],selectChange:c,inputChange:u,buttonClick:m,action:p,disabled:f,...g}=e,b=i.useRef(null);return i.useEffect(()=>{var e;if(!b.current)return;let t=null===(e=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value"))||void 0===e?void 0:e.set;t&&(b.current.value="",t.call(b.current,o),b.current.dispatchEvent(new Event("input",{bubbles:!0})))},[o]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(w,{type:a,id:"pskInput",variant:s,value:o,onChange:u,action:p,disabled:f,ref:b}),(0,n.jsxs)(I,{value:null==l?void 0:l.toString(),onValueChange:e=>c(e),disabled:f,children:[(0,n.jsx)(A,{className:"!max-w-max",children:(0,n.jsx)(D,{})}),(0,n.jsx)(_,{children:d.map(e=>{let{text:t,value:a,key:l}=e;return(0,n.jsx)(V,{value:a,children:t},l)})})]}),(0,n.jsx)(P,{type:"button",variant:"success",onClick:m,disabled:f,...g,children:r})]})});function U(e){let{control:t,field:a,disabled:l}=e,[s,o]=(0,i.useState)(!1),r=()=>{o(!s)};return(0,n.jsx)(k.Qr,{name:a.name,control:t,render:e=>{let{field:{value:t,...i}}=e;return(0,n.jsx)(O,{type:a.hide&&!s?"password":"text",action:a.hide?{icon:s?C.Z:S.Z,onClick:r}:void 0,devicePSKBitCount:a.devicePSKBitCount,bits:a.bits,inputChange:a.inputChange,selectChange:a.selectChange,buttonClick:a.buttonClick,value:t,variant:a.validationText?"invalid":"default",buttonText:"Generate",...a.properties,...i,disabled:l})}})}function z(e){let{control:t,disabled:a,field:l}=e;return(0,n.jsx)(k.Qr,{name:l.name,control:t,render:e=>{let{field:{value:t,onChange:i,...s}}=e,{enumValue:o,formatEnumName:r,...d}=l.properties,c=o?Object.entries(o).filter(e=>"number"==typeof e[1]):[];return(0,n.jsxs)(I,{onValueChange:e=>i(Number.parseInt(e)),disabled:a,value:null==t?void 0:t.toString(),...d,...s,children:[(0,n.jsx)(A,{children:(0,n.jsx)(D,{})}),(0,n.jsx)(_,{children:c.map(e=>{let[t,a]=e;return(0,n.jsx)(V,{value:a.toString(),children:r?t.replace(/_/g," ").toLowerCase().split(" ").map(e=>e.charAt(0).toUpperCase()+e.substring(1)).join(" "):t},t)})})]})}})}O.displayName="Button";var Z=a("1224");let L=i.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)(Z.fC,{className:b("peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-slate-900 data-[state=unchecked]:bg-slate-200 dark:focus:ring-slate-400 dark:focus:ring-offset-slate-900 dark:data-[state=checked]:bg-slate-400 dark:data-[state=unchecked]:bg-slate-700",a),...l,ref:t,children:(0,n.jsx)(Z.bU,{className:b("pointer-events-none block h-5 w-5 rounded-full bg-white shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});function W(e){let{control:t,disabled:a,field:l}=e,i=e=>t=>{e({target:{value:t}})};return(0,n.jsx)(k.Qr,{name:l.name,control:t,render:e=>{let{field:{value:t,onChange:s,...o}}=e;return(0,n.jsx)(L,{checked:t,onCheckedChange:i(s),disabled:a,...l.properties,...o})}})}function G(e){let{field:t,control:a,disabled:l}=e;switch(t.type){case"text":case"password":case"number":return(0,n.jsx)(M,{field:t,control:a,disabled:l});case"toggle":return(0,n.jsx)(W,{field:t,control:a,disabled:l});case"select":return(0,n.jsx)(z,{field:t,control:a,disabled:l});case"passwordGenerator":return(0,n.jsx)(U,{field:t,control:a,disabled:l});case"multiSelect":return(0,n.jsx)("div",{children:"tmp"})}}L.displayName=Z.fC.displayName;var F=a("9006");let K=i.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)(F.f,{ref:t,className:b("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",a),...l})});K.displayName=F.f.displayName;let H=e=>{let{label:t,description:a,children:l,valid:i,validationText:s}=e;return(0,n.jsx)("div",{className:"pt-6 sm:pt-5",children:(0,n.jsx)("div",{role:"group","aria-labelledby":"label-notifications",children:(0,n.jsxs)("div",{className:"sm:grid sm:grid-cols-3 sm:items-baseline sm:gap-4",children:[(0,n.jsx)(K,{children:t}),(0,n.jsx)("div",{className:"sm:col-span-2",children:(0,n.jsxs)("div",{className:"max-w-lg",children:[(0,n.jsx)("p",{className:"text-sm text-gray-500",children:a}),(0,n.jsx)("p",{hidden:i??!0,className:"text-sm text-red-500",children:s}),(0,n.jsx)("div",{className:"mt-4 space-y-4",children:(0,n.jsx)("div",{className:"flex items-center",children:l})})]})})]})})})},$=e=>{let{className:t,children:a}=e;return(0,n.jsx)("h4",{className:b("scroll-m-20 text-xl font-semibold tracking-tight",t),children:a})},Q=e=>{let{className:t,children:a}=e;return(0,n.jsx)("p",{className:b("text-sm text-slate-500 dark:text-slate-400",t),children:a})};function Y(e){let{onSubmit:t,submitType:a="onChange",hasSubmitButton:l,defaultValues:i,fieldGroups:s}=e,{handleSubmit:o,control:r,getValues:d}=(0,k.cI)({mode:a,defaultValues:i}),c=(e,t)=>!!t||!!e&&e.some(e=>{let t=d(e.fieldName);return"always"===t||("boolean"==typeof t?e.invert?t:!t:"number"==typeof t&&(e.invert?e.selector!==t:e.selector===t))});return(0,n.jsxs)("form",{className:"space-y-8 divide-y divide-gray-200",..."onSubmit"===a?{onSubmit:o(t)}:{onChange:o(t)},children:[s.map(e=>(0,n.jsxs)("div",{className:"space-y-8 divide-y divide-gray-200 sm:space-y-5",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)($,{className:"font-medium",children:e.label}),(0,n.jsx)(Q,{children:e.description})]}),e.fields.map(e=>(0,n.jsx)(H,{label:e.label,description:e.description,valid:void 0===e.validationText||""===e.validationText,validationText:e.validationText,children:(0,n.jsx)(G,{field:e,control:r,disabled:c(e.disabledBy,e.disabled)})},e.label))]},e.label)),l&&(0,n.jsx)(P,{type:"submit",children:"Submit"})]})}let q=0,X=new Map,J=e=>{if(X.has(e))return;let t=setTimeout(()=>{X.delete(e),en({type:"REMOVE_TOAST",toastId:e})},1e6);X.set(e,t)},ee=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;if(a)J(a);else for(let t of e.toasts)J(t.id);return{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},et=[],ea={toasts:[]};function en(e){for(let t of(ea=ee(ea,e),et))t(ea)}function el(e){let{...t}=e,a=(q=(q+1)%Number.MAX_VALUE).toString(),n=()=>en({type:"DISMISS_TOAST",toastId:a});return en({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{!e&&n()}}}),{id:a,dismiss:n,update:e=>en({type:"UPDATE_TOAST",toast:{...e,id:a}})}}let ei=e=>(et.push(e),function(){let t=et.indexOf(e);t>-1&&et.splice(t,1)}),es=()=>ea;function eo(){return{...(0,i.useSyncExternalStore)(ei,es),toast:el,dismiss:e=>en({type:"DISMISS_TOAST",toastId:e})}}var er=a("5415"),ed=a("3651");let ec=e=>{var t,a,l,s,o,d,c,m,p,f,g,b,h;let{channel:x}=e,{config:v,connection:y,addChannel:j}=u(),{toast:N}=eo(),[w,C]=(0,i.useState)((0,er.fromByteArray)((null==x?void 0:null===(t=x.settings)||void 0===t?void 0:t.psk)??new Uint8Array(0))),[S,k]=(0,i.useState)((null==x?void 0:null===(a=x.settings)||void 0===a?void 0:a.psk.length)??16),[M,B]=(0,i.useState)(),P=(e,t)=>{e.length%4!=0||(0,er.toByteArray)(e).length!==t?B(`Please enter a valid ${8*t} bit PSK.`):B(void 0)};return(0,n.jsx)(Y,{onSubmit:e=>{let t=new r.Bj.Channel.Channel({...e,settings:{...e.settings,psk:(0,er.toByteArray)(w),moduleSettings:{positionPrecision:e.settings.positionEnabled?e.settings.preciseLocation?32:e.settings.positionPrecision:0}}});null==y||y.setChannel(t).then(()=>{var e;N({title:`Saved Channel: ${null===(e=t.settings)||void 0===e?void 0:e.name}`}),j(t)})},submitType:"onSubmit",hasSubmitButton:!0,defaultValues:{...x,settings:{...null==x?void 0:x.settings,psk:w,positionEnabled:(null==x?void 0:null===(s=x.settings)||void 0===s?void 0:null===(l=s.moduleSettings)||void 0===l?void 0:l.positionPrecision)!==void 0&&(null==x?void 0:null===(d=x.settings)||void 0===d?void 0:null===(o=d.moduleSettings)||void 0===o?void 0:o.positionPrecision)>0,preciseLocation:(null==x?void 0:null===(m=x.settings)||void 0===m?void 0:null===(c=m.moduleSettings)||void 0===c?void 0:c.positionPrecision)===32,positionPrecision:(null==x?void 0:null===(f=x.settings)||void 0===f?void 0:null===(p=f.moduleSettings)||void 0===p?void 0:p.positionPrecision)===void 0?10:null==x?void 0:null===(b=x.settings)||void 0===b?void 0:null===(g=b.moduleSettings)||void 0===g?void 0:g.positionPrecision}},fieldGroups:[{label:"Channel Settings",description:"Crypto, MQTT & misc settings",fields:[{type:"select",name:"role",label:"Role",disabled:0===x.index,description:"Device telemetry is sent over PRIMARY. Only one PRIMARY allowed",properties:{enumValue:0===x.index?{PRIMARY:1}:{DISABLED:0,SECONDARY:2}}},{type:"passwordGenerator",name:"settings.psk",label:"pre-Shared Key",description:"256, 128, or 8 bit PSKs allowed",validationText:M,devicePSKBitCount:S??0,inputChange:e=>{var t;let a=null===(t=e.currentTarget)||void 0===t?void 0:t.value;C(a),P(a,S)},selectChange:e=>{let t=Number.parseInt(e);k(t),P(w,t)},buttonClick:()=>{C(btoa((0,ed.Z)({length:S??0,type:"alphanumeric"}))),B(void 0)},hide:!0,properties:{value:w}},{type:"text",name:"settings.name",label:"Name",description:"A unique name for the channel <12 bytes, leave blank for default"},{type:"toggle",name:"settings.uplinkEnabled",label:"Uplink Enabled",description:"Send messages from the local mesh to MQTT"},{type:"toggle",name:"settings.downlinkEnabled",label:"Downlink Enabled",description:"Send messages from MQTT to the local mesh"},{type:"toggle",name:"settings.positionEnabled",label:"Allow Position Requests",description:"Send position to channel"},{type:"toggle",name:"settings.preciseLocation",label:"Precise Location",description:"Send precise location to channel"},{type:"select",name:"settings.positionPrecision",label:"Approximate Location",description:"If not sharing precise location, position shared on channel will be accurate within this distance",properties:{enumValue:(null===(h=v.display)||void 0===h?void 0:h.units)===0?{"Within 23 km":10,"Within 12 km":11,"Within 5.8 km":12,"Within 2.9 km":13,"Within 1.5 km":14,"Within 700 m":15,"Within 350 m":16,"Within 200 m":17,"Within 90 m":18,"Within 50 m":19}:{"Within 15 miles":10,"Within 7.3 miles":11,"Within 3.6 miles":12,"Within 1.8 miles":13,"Within 0.9 miles":14,"Within 0.5 miles":15,"Within 0.2 miles":16,"Within 600 feet":17,"Within 300 feet":18,"Within 150 feet":19}}}]}]})};var eu=a("975");let em=i.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)("footer",{className:`flex flex- justify-center p-2 ${a}`,style:{backgroundColor:"var(--backgroundPrimary)",color:"var(--textPrimary)"},children:(0,n.jsxs)("p",{children:[(0,n.jsx)("a",{href:"https://vercel.com/?utm_source=meshtastic&utm_campaign=oss",className:"hover:underline",style:{color:"var(--link)"},children:"Powered by ▲ Vercel"})," ","| Meshtastic\xae is a registered trademark of Meshtastic LLC. |"," ",(0,n.jsx)("a",{href:"https://meshtastic.org/docs/legal",className:"hover:underline",style:{color:"var(--link)"},children:"Legal Information"})]})})}),ep=e=>{let{label:t,noPadding:a,actions:l,children:i}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"relative flex h-full w-full flex-col",children:[(0,n.jsxs)("div",{className:"flex h-14 shrink-0 border-b-[0.5px] border-slate-300 dark:border-slate-700 md:h-16 md:px-4",children:[(0,n.jsx)("button",{type:"button",className:"pl-4 transition-all hover:text-accent md:hidden",children:(0,n.jsx)(eu.Z,{})}),(0,n.jsx)("div",{className:"flex flex-1 items-center justify-between px-4 md:px-0",children:(0,n.jsxs)("div",{className:"flex w-full items-center",children:[(0,n.jsx)("span",{className:"w-full text-lg font-medium",children:t}),(0,n.jsx)("div",{className:"flex justify-end space-x-4",children:null==l?void 0:l.map((e,t)=>(0,n.jsx)("button",{type:"button",className:"transition-all hover:text-accent",onClick:e.onClick,children:(0,n.jsx)(e.icon,{className:e.iconClasses})},e.icon.name))})]})})]}),(0,n.jsxs)("div",{className:b("flex h-full w-full flex-col overflow-y-auto",!a&&"pl-3 pr-3 "),children:[i,(0,n.jsx)(em,{})]})]})})},ef=e=>{let{label:t,children:a}=e;return(0,n.jsxs)("div",{className:"px-4 py-2",children:[(0,n.jsx)($,{className:"mb-2 ml-2",children:t}),(0,n.jsx)("div",{className:"space-y-1",children:a})]})},eg=e=>{let{label:t,active:a,Icon:l,element:i,onClick:s}=e;return(0,n.jsxs)(P,{onClick:s,variant:a?"subtle":"ghost",size:"sm",className:"w-full justify-start gap-2",children:[l&&(0,n.jsx)(l,{size:16}),i&&i,t]})};var eb=a("6071"),eh=a("7808"),ex=a("4323"),ev=a("6547"),ey=a("8070"),ej=a("6826"),eN=a("6416"),ew=a("9997"),eC=a("1523");let eS=e=>{var t,a,l,i,s,o,r;let{children:d}=e,{hardware:c,nodes:m,metadata:p}=u(),f=m.get(c.myNodeNum),g=p.get(0),{activePage:b,setActivePage:h,setDialogOpen:x}=u(),v=[{name:"Messages",icon:eb.Z,page:"messages"},{name:"Map",icon:eh.Z,page:"map"},{name:"Config",icon:ex.Z,page:"config"},{name:"Channels",icon:ev.Z,page:"channels"},{name:"Nodes",icon:ey.Z,page:"nodes"}];return(0,n.jsxs)("div",{className:"min-w-[280px] max-w-min flex-col overflow-y-auto border-r-[0.5px] border-slate-300 bg-transparent dark:border-slate-700",children:[(0,n.jsxs)("div",{className:"flex justify-between px-8 pt-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-lg font-medium",children:(null==f?void 0:null===(t=f.user)||void 0===t?void 0:t.shortName)??"UNK"}),(0,n.jsx)(Q,{children:(null==f?void 0:null===(a=f.user)||void 0===a?void 0:a.longName)??"UNK"})]}),(0,n.jsx)("button",{type:"button",className:"transition-all hover:text-accent",onClick:()=>x("deviceName",!0),children:(0,n.jsx)(ej.Z,{size:16})})]}),(0,n.jsxs)("div",{className:"px-8 pb-6",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(eN.Z,{size:24,viewBox:"0 0 28 24"}),(0,n.jsx)(Q,{children:(null==f?void 0:null===(l=f.deviceMetrics)||void 0===l?void 0:l.batteryLevel)?(null==f?void 0:null===(i=f.deviceMetrics)||void 0===i?void 0:i.batteryLevel)>100?"Charging":(null==f?void 0:null===(s=f.deviceMetrics)||void 0===s?void 0:s.batteryLevel)+"%":"UNK"})]}),(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(ew.Z,{size:24,viewBox:"0 0 36 24"}),(0,n.jsxs)(Q,{children:[(null==f?void 0:null===(r=f.deviceMetrics)||void 0===r?void 0:null===(o=r.voltage)||void 0===o?void 0:o.toPrecision(3))??"UNK"," volts"]})]}),(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(eC.Z,{size:24,viewBox:"0 0 36 24"}),(0,n.jsxs)(Q,{children:["v",(null==g?void 0:g.firmwareVersion)??"UNK"]})]})]}),(0,n.jsx)(ef,{label:"Navigation",children:v.map(e=>(0,n.jsx)(eg,{label:e.name,Icon:e.icon,onClick:()=>{h(e.page)},active:e.page===b},e.name))}),d]})};var ek=a("3741"),eM=a("8093");let eB=e=>{var t,a;return(null===(t=e.settings)||void 0===t?void 0:t.name.length)?null===(a=e.settings)||void 0===a?void 0:a.name:0===e.index?"Primary":`Ch ${e.index}`},eP=()=>{let{channels:e,setDialogOpen:t}=u(),[a,l]=(0,i.useState)(r.Yk.ChannelNumber.Primary),s=e.get(a),o=Array.from(e.values());return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eS,{}),(0,n.jsx)(ep,{label:`Channel: ${s?eB(s):"Loading..."}`,actions:[{icon:ek.Z,onClick(){t("import",!0)}},{icon:eM.Z,onClick(){t("QR",!0)}}],children:(0,n.jsxs)(h,{defaultValue:"0",children:[(0,n.jsx)(x,{children:o.map(e=>(0,n.jsx)(v,{value:e.index.toString(),children:eB(e)},e.index))}),o.map(e=>(0,n.jsx)(y,{value:e.index.toString(),children:(0,n.jsx)(ec,{channel:e},e.index)},e.index))]})})]})},eT=()=>{let{config:e,setWorkingConfig:t}=u(),[a,l]=(0,i.useState)();return(0,n.jsx)(Y,{onSubmit:e=>{t(new r.Bj.Config.Config({payloadVariant:{case:"bluetooth",value:e}}))},defaultValues:e.bluetooth,fieldGroups:[{label:"Bluetooth Settings",description:"Settings for the Bluetooth module",fields:[{type:"toggle",name:"enabled",label:"Enabled",description:"Enable or disable Bluetooth"},{type:"select",name:"mode",label:"Pairing mode",description:"Pin selection behaviour.",disabledBy:[{fieldName:"enabled"}],properties:{enumValue:r.Bj.Config.Config_BluetoothConfig_PairingMode,formatEnumName:!0}},{type:"number",name:"fixedPin",label:"Pin",description:"Pin to use when pairing",validationText:a,inputChange:e=>{"0"==e.target.value[0]?l("Bluetooth Pin cannot start with 0."):l("")},disabledBy:[{fieldName:"mode",selector:r.Bj.Config.Config_BluetoothConfig_PairingMode.FIXED_PIN,invert:!0},{fieldName:"enabled"}],properties:{}}]}]})},eE=()=>{let{config:e,setWorkingConfig:t}=u();return(0,n.jsx)(Y,{onSubmit:e=>{t(new r.Bj.Config.Config({payloadVariant:{case:"device",value:e}}))},defaultValues:e.device,fieldGroups:[{label:"Device Settings",description:"Settings for the device",fields:[{type:"select",name:"role",label:"Role",description:"What role the device performs on the mesh",properties:{enumValue:{Client:r.Bj.Config.Config_DeviceConfig_Role.CLIENT,"Client Mute":r.Bj.Config.Config_DeviceConfig_Role.CLIENT_MUTE,Router:r.Bj.Config.Config_DeviceConfig_Role.ROUTER,Repeater:r.Bj.Config.Config_DeviceConfig_Role.REPEATER,Tracker:r.Bj.Config.Config_DeviceConfig_Role.TRACKER,Sensor:r.Bj.Config.Config_DeviceConfig_Role.SENSOR,TAK:r.Bj.Config.Config_DeviceConfig_Role.TAK,"Client Hidden":r.Bj.Config.Config_DeviceConfig_Role.CLIENT_HIDDEN,"Lost and Found":r.Bj.Config.Config_DeviceConfig_Role.LOST_AND_FOUND,"TAK Tracker":r.Bj.Config.Config_DeviceConfig_Role.SENSOR},formatEnumName:!0}},{type:"number",name:"buttonGpio",label:"Button Pin",description:"Button pin override"},{type:"number",name:"buzzerGpio",label:"Buzzer Pin",description:"Buzzer pin override"},{type:"select",name:"rebroadcastMode",label:"Rebroadcast Mode",description:"How to handle rebroadcasting",properties:{enumValue:r.Bj.Config.Config_DeviceConfig_RebroadcastMode,formatEnumName:!0}},{type:"number",name:"nodeInfoBroadcastSecs",label:"Node Info Broadcast Interval",description:"How often to broadcast node info",properties:{suffix:"Seconds"}},{type:"toggle",name:"doubleTapAsButtonPress",label:"Double Tap as Button Press",description:"Treat double tap as button press"},{type:"toggle",name:"disableTripleClick",label:"Disable Triple Click",description:"Disable triple click"},{type:"toggle",name:"ledHeartbeatDisabled",label:"LED Heartbeat Disabled",description:"Disable default blinking LED"}]}]})},eR=()=>{let{config:e,setWorkingConfig:t}=u();return(0,n.jsx)(Y,{onSubmit:e=>{t(new r.Bj.Config.Config({payloadVariant:{case:"display",value:e}}))},defaultValues:e.display,fieldGroups:[{label:"Display Settings",description:"Settings for the device display",fields:[{type:"number",name:"screenOnSecs",label:"Screen Timeout",description:"Turn off the display after this long",properties:{suffix:"Seconds"}},{type:"select",name:"gpsFormat",label:"GPS Display Units",description:"Coordinate display format",properties:{enumValue:r.Bj.Config.Config_DisplayConfig_GpsCoordinateFormat}},{type:"number",name:"autoScreenCarouselSecs",label:"Carousel Delay",description:"How fast to cycle through windows",properties:{suffix:"Seconds"}},{type:"toggle",name:"compassNorthTop",label:"Compass North Top",description:"Fix north to the top of compass"},{type:"toggle",name:"flipScreen",label:"Flip Screen",description:"Flip display 180 degrees"},{type:"select",name:"units",label:"Display Units",description:"Display metric or imperial units",properties:{enumValue:r.Bj.Config.Config_DisplayConfig_DisplayUnits,formatEnumName:!0}},{type:"select",name:"oled",label:"OLED Type",description:"Type of OLED screen attached to the device",properties:{enumValue:r.Bj.Config.Config_DisplayConfig_OledType}},{type:"select",name:"displaymode",label:"Display Mode",description:"Screen layout variant",properties:{enumValue:r.Bj.Config.Config_DisplayConfig_DisplayMode,formatEnumName:!0}},{type:"toggle",name:"headingBold",label:"Bold Heading",description:"Bolden the heading text"},{type:"toggle",name:"wakeOnTapOrMotion",label:"Wake on Tap or Motion",description:"Wake the device on tap or motion"}]}]})},eI=()=>{let{config:e,setWorkingConfig:t}=u();return(0,n.jsx)(Y,{onSubmit:e=>{t(new r.Bj.Config.Config({payloadVariant:{case:"lora",value:e}}))},defaultValues:e.lora,fieldGroups:[{label:"Mesh Settings",description:"Settings for the LoRa mesh",fields:[{type:"select",name:"region",label:"Region",description:"Sets the region for your node",properties:{enumValue:r.Bj.Config.Config_LoRaConfig_RegionCode}},{type:"select",name:"hopLimit",label:"Hop Limit",description:"Maximum number of hops",properties:{enumValue:{1:1,2:2,3:3,4:4,5:5,6:6,7:7}}},{type:"number",name:"channelNum",label:"Frequency Slot",description:"LoRa frequency channel number"},{type:"toggle",name:"ignoreMqtt",label:"Ignore MQTT",description:"Don't forward MQTT messages over the mesh"},{type:"toggle",name:"configOkToMqtt",label:"OK to MQTT",description:"When set to true, this configuration indicates that the user approves the packet to be uploaded to MQTT. If set to false, remote nodes are requested not to forward packets to MQTT"}]},{label:"Waveform Settings",description:"Settings for the LoRa waveform",fields:[{type:"toggle",name:"usePreset",label:"Use Preset",description:"Use one of the predefined modem presets"},{type:"select",name:"modemPreset",label:"Modem Preset",description:"Modem preset to use",disabledBy:[{fieldName:"usePreset"}],properties:{enumValue:r.Bj.Config.Config_LoRaConfig_ModemPreset,formatEnumName:!0}},{type:"number",name:"bandwidth",label:"Bandwidth",description:"Channel bandwidth in MHz",disabledBy:[{fieldName:"usePreset",invert:!0}],properties:{suffix:"MHz"}},{type:"number",name:"spreadFactor",label:"Spreading Factor",description:"Indicates the number of chirps per symbol",disabledBy:[{fieldName:"usePreset",invert:!0}],properties:{suffix:"CPS"}},{type:"number",name:"codingRate",label:"Coding Rate",description:"The denominator of the coding rate",disabledBy:[{fieldName:"usePreset",invert:!0}]}]},{label:"Radio Settings",description:"Settings for the LoRa radio",fields:[{type:"toggle",name:"txEnabled",label:"Transmit Enabled",description:"Enable/Disable transmit (TX) from the LoRa radio"},{type:"number",name:"txPower",label:"Transmit Power",description:"Max transmit power",properties:{suffix:"dBm"}},{type:"toggle",name:"overrideDutyCycle",label:"Override Duty Cycle",description:"Override Duty Cycle"},{type:"number",name:"frequencyOffset",label:"Frequency Offset",description:"Frequency offset to correct for crystal calibration errors",properties:{suffix:"Hz"}},{type:"toggle",name:"sx126xRxBoostedGain",label:"Boosted RX Gain",description:"Boosted RX gain"},{type:"number",name:"overrideFrequency",label:"Override Frequency",description:"Override frequency",properties:{suffix:"MHz",step:.001}}]}]})};function eD(e){return`${255&e}.${e>>8&255}.${e>>16&255}.${e>>24&255}`}function eA(e){return e.split(".").reverse().reduce((e,t)=>(e<<8)+Number.parseInt(t),0)>>>0}let e_=()=>{var e,t,a,l,i,s,o,d;let{config:c,setWorkingConfig:m}=u();return(0,n.jsx)(Y,{onSubmit:e=>{m(new r.Bj.Config.Config({payloadVariant:{case:"network",value:{...e,ipv4Config:new r.Bj.Config.Config_NetworkConfig_IpV4Config({ip:eA(e.ipv4Config.ip)??0,gateway:eA(e.ipv4Config.gateway)??0,subnet:eA(e.ipv4Config.subnet)??0,dns:eA(e.ipv4Config.dns)??0})}}}))},defaultValues:{...c.network,ipv4Config:{ip:eD((null===(t=c.network)||void 0===t?void 0:null===(e=t.ipv4Config)||void 0===e?void 0:e.ip)??0),gateway:eD((null===(l=c.network)||void 0===l?void 0:null===(a=l.ipv4Config)||void 0===a?void 0:a.gateway)??0),subnet:eD((null===(s=c.network)||void 0===s?void 0:null===(i=s.ipv4Config)||void 0===i?void 0:i.subnet)??0),dns:eD((null===(d=c.network)||void 0===d?void 0:null===(o=d.ipv4Config)||void 0===o?void 0:o.dns)??0)}},fieldGroups:[{label:"WiFi Config",description:"WiFi radio configuration",fields:[{type:"toggle",name:"wifiEnabled",label:"Enabled",description:"Enable or disable the WiFi radio"},{type:"text",name:"wifiSsid",label:"SSID",description:"Network name",disabledBy:[{fieldName:"wifiEnabled"}]},{type:"password",name:"wifiPsk",label:"PSK",description:"Network password",disabledBy:[{fieldName:"wifiEnabled"}]}]},{label:"Ethernet Config",description:"Ethernet port configuration",fields:[{type:"toggle",name:"ethEnabled",label:"Enabled",description:"Enable or disable the Ethernet port"}]},{label:"IP Config",description:"IP configuration",fields:[{type:"select",name:"addressMode",label:"Address Mode",description:"Address assignment selection",properties:{enumValue:r.Bj.Config.Config_NetworkConfig_AddressMode}},{type:"text",name:"ipv4Config.ip",label:"IP",description:"IP Address",disabledBy:[{fieldName:"addressMode",selector:r.Bj.Config.Config_NetworkConfig_AddressMode.DHCP}]},{type:"text",name:"ipv4Config.gateway",label:"Gateway",description:"Default Gateway",disabledBy:[{fieldName:"addressMode",selector:r.Bj.Config.Config_NetworkConfig_AddressMode.DHCP}]},{type:"text",name:"ipv4Config.subnet",label:"Subnet",description:"Subnet Mask",disabledBy:[{fieldName:"addressMode",selector:r.Bj.Config.Config_NetworkConfig_AddressMode.DHCP}]},{type:"text",name:"ipv4Config.dns",label:"DNS",description:"DNS Server",disabledBy:[{fieldName:"addressMode",selector:r.Bj.Config.Config_NetworkConfig_AddressMode.DHCP}]}]},{label:"NTP Config",description:"NTP configuration",fields:[{type:"text",name:"ntpServer",label:"NTP Server"}]},{label:"Rsyslog Config",description:"Rsyslog configuration",fields:[{type:"text",name:"rsyslogServer",label:"Rsyslog Server"}]}]})},eV=()=>{let{config:e,nodes:t,hardware:a,setWorkingConfig:l}=u();return(0,n.jsx)(Y,{onSubmit:e=>{l(new r.Bj.Config.Config({payloadVariant:{case:"position",value:e}}))},defaultValues:e.position,fieldGroups:[{label:"Position Settings",description:"Settings for the position module",fields:[{type:"toggle",name:"positionBroadcastSmartEnabled",label:"Enable Smart Position",description:"Only send position when there has been a meaningful change in location"},{type:"select",name:"gpsMode",label:"GPS Mode",description:"Configure whether device GPS is Enabled, Disabled, or Not Present",properties:{enumValue:r.Bj.Config.Config_PositionConfig_GpsMode}},{type:"toggle",name:"fixedPosition",label:"Fixed Position",description:"Don't report GPS position, but a manually-specified one"},{type:"multiSelect",name:"positionFlags",label:"Position Flags",description:"Configuration options for Position messages",properties:{enumValue:r.Bj.Config.Config_PositionConfig_PositionFlags}},{type:"number",name:"rxGpio",label:"Receive Pin",description:"GPS module RX pin override"},{type:"number",name:"txGpio",label:"Transmit Pin",description:"GPS module TX pin override"},{type:"number",name:"gpsEnGpio",label:"Enable Pin",description:"GPS module enable pin override"}]},{label:"Intervals",description:"How often to send position updates",fields:[{type:"number",name:"positionBroadcastSecs",label:"Broadcast Interval",description:"How often your position is sent out over the mesh",properties:{suffix:"Seconds"}},{type:"number",name:"gpsUpdateInterval",label:"GPS Update Interval",description:"How often a GPS fix should be acquired",properties:{suffix:"Seconds"}},{type:"number",name:"broadcastSmartMinimumDistance",label:"Smart Position Minimum Distance",description:"Minimum distance (in meters) that must be traveled before a position update is sent",disabledBy:[{fieldName:"positionBroadcastSmartEnabled"}]},{type:"number",name:"broadcastSmartMinimumIntervalSecs",label:"Smart Position Minimum Interval",description:"Minimum interval (in seconds) that must pass before a position update is sent",disabledBy:[{fieldName:"positionBroadcastSmartEnabled"}]}]}]})},eO=()=>{let{config:e,setWorkingConfig:t}=u();return(0,n.jsx)(Y,{onSubmit:e=>{t(new r.Bj.Config.Config({payloadVariant:{case:"power",value:e}}))},defaultValues:e.power,fieldGroups:[{label:"Power Config",description:"Settings for the power module",fields:[{type:"toggle",name:"isPowerSaving",label:"Enable power saving mode",description:"Select if powered from a low-current source (i.e. solar), to minimize power consumption as much as possible."},{type:"number",name:"onBatteryShutdownAfterSecs",label:"Shutdown on battery delay",description:"Automatically shutdown node after this long when on battery, 0 for indefinite",properties:{suffix:"Seconds"}},{type:"number",name:"adcMultiplierOverride",label:"ADC Multiplier Override ratio",description:"Used for tweaking battery voltage reading",properties:{step:1e-4}},{type:"number",name:"waitBluetoothSecs",label:"No Connection Bluetooth Disabled",description:"If the device does not receive a Bluetooth connection, the BLE radio will be disabled after this long",properties:{suffix:"Seconds"}},{type:"number",name:"deviceBatteryInaAddress",label:"INA219 Address",description:"Address of the INA219 battery monitor"}]},{label:"Sleep Settings",description:"Sleep settings for the power module",fields:[{type:"number",name:"sdsSecs",label:"Super Deep Sleep Duration",description:"How long the device will be in super deep sleep for",properties:{suffix:"Seconds"}},{type:"number",name:"lsSecs",label:"Light Sleep Duration",description:"How long the device will be in light sleep for",properties:{suffix:"Seconds"}},{type:"number",name:"minWakeSecs",label:"Minimum Wake Time",description:"Minimum amount of time the device will stay awake for after receiving a packet",properties:{suffix:"Seconds"}}]}]})};var eU=a("720"),ez=a("2878");let eZ=eU.fC;eU.xz;let eL=e=>{let{children:t,...a}=e;return(0,n.jsx)(eU.h_,{...a,children:(0,n.jsx)("div",{className:"fixed inset-0 z-50 flex items-start justify-center sm:items-center",children:t})})};eL.displayName=eU.h_.displayName;let eW=i.forwardRef((e,t)=>{let{className:a,children:l,...i}=e;return(0,n.jsx)(eU.aV,{className:b("fixed inset-0 z-50 bg-black/50 backdrop-blur-sm transition-opacity animate-in fade-in",a),...i,ref:t})});eW.displayName=eU.aV.displayName;let eG=i.forwardRef((e,t)=>{let{className:a,children:l,...i}=e;return(0,n.jsxs)(eL,{children:[(0,n.jsx)(eW,{}),(0,n.jsxs)(eU.VY,{ref:t,className:b("fixed z-50 grid w-full scale-100 gap-4 bg-white p-6 opacity-100 animate-in fade-in-90 slide-in-from-bottom-10 sm:max-w-lg sm:rounded-lg sm:zoom-in-90 sm:slide-in-from-bottom-0","dark:bg-slate-900",a),...i,children:[l,(0,n.jsxs)(eU.x8,{className:"absolute top-4 right-4 rounded-sm opacity-70 transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-slate-100 dark:focus:ring-slate-400 dark:focus:ring-offset-slate-900 dark:data-[state=open]:bg-slate-800",children:[(0,n.jsx)(ez.Z,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});eG.displayName=eU.VY.displayName;let eF=e=>{let{className:t,...a}=e;return(0,n.jsx)("div",{className:b("flex flex-col space-y-2 text-center sm:text-left",t),...a})};eF.displayName="DialogHeader";let eK=e=>{let{className:t,...a}=e;return(0,n.jsx)("div",{className:b("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};eK.displayName="DialogFooter";let eH=i.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)(eU.Dx,{ref:t,className:b("text-lg font-semibold text-slate-900","dark:text-slate-50",a),...l})});eH.displayName=eU.Dx.displayName;let e$=i.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)(eU.dk,{ref:t,className:b("text-sm text-slate-500","dark:text-slate-400",a),...l})});e$.displayName=eU.dk.displayName;let eQ=e=>{let{open:t,onOpenChange:a,onSubmit:l}=e;return(0,n.jsx)(eZ,{open:t,onOpenChange:a,children:(0,n.jsxs)(eG,{children:[(0,n.jsxs)(eF,{children:[(0,n.jsx)(eH,{children:"Regenerate Key pair?"}),(0,n.jsx)(e$,{children:"Are you sure you want to regenerate key pair?"})]}),(0,n.jsx)(eK,{children:(0,n.jsx)(P,{variant:"destructive",onClick:()=>l(),children:"Regenerate"})})]})})};var eY=a("5651");function eq(e){return eY.Sg.getPublicKey(e)}let eX=()=>{var e,t,a,l,s,o,d,c;let{config:m,nodes:p,hardware:f,setWorkingConfig:g}=u(),[b,h]=(0,i.useState)((0,er.fromByteArray)((null===(e=m.security)||void 0===e?void 0:e.privateKey)??new Uint8Array(0))),[x,v]=(0,i.useState)(!1),[y,j]=(0,i.useState)((null===(t=m.security)||void 0===t?void 0:t.privateKey.length)??32),[N,w]=(0,i.useState)(),[k,M]=(0,i.useState)((0,er.fromByteArray)((null===(a=m.security)||void 0===a?void 0:a.publicKey)??new Uint8Array(0))),[B,P]=(0,i.useState)((0,er.fromByteArray)((null===(l=m.security)||void 0===l?void 0:l.adminKey[0])??new Uint8Array(0))),[T,E]=(0,i.useState)(),[R,I]=(0,i.useState)(!1),D=(e,t,a)=>{try{a(e.length%4!=0||(0,er.toByteArray)(e).length!==t?`Please enter a valid ${8*t} bit PSK.`:void 0)}catch(e){console.error(e),a(`Please enter a valid ${8*t} bit PSK.`)}},A=()=>{let e=function(){let e=eY.Sg.utils.randomPrivateKey();return e[0]&=248,e[31]&=127,e[31]|=64,e}(),t=eq(e);h((0,er.fromByteArray)(e)),M((0,er.fromByteArray)(t)),D((0,er.fromByteArray)(e),y,w),I(!1)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Y,{onSubmit:e=>{!N&&!T&&g(new r.Bj.Config.Config({payloadVariant:{case:"security",value:{...e,adminKey:[(0,er.toByteArray)(B)],privateKey:(0,er.toByteArray)(b),publicKey:(0,er.toByteArray)(k)}}}))},submitType:"onChange",defaultValues:{...m.security,adminKey:B,privateKey:b,publicKey:k,adminChannelEnabled:(null===(s=m.security)||void 0===s?void 0:s.adminChannelEnabled)??!1,isManaged:(null===(o=m.security)||void 0===o?void 0:o.isManaged)??!1,debugLogApiEnabled:(null===(d=m.security)||void 0===d?void 0:d.debugLogApiEnabled)??!1,serialEnabled:(null===(c=m.security)||void 0===c?void 0:c.serialEnabled)??!1},fieldGroups:[{label:"Security Settings",description:"Settings for the Security configuration",fields:[{type:"passwordGenerator",name:"privateKey",label:"Private Key",description:"Used to create a shared key with a remote device",bits:[{text:"256 bit",value:"32",key:"bit256"}],validationText:N,devicePSKBitCount:y,inputChange:e=>{let t=e.target.value;h(t),D(t,y,w);let a=eq((0,er.toByteArray)(t));M((0,er.fromByteArray)(a))},selectChange:e=>{let t=Number.parseInt(e);j(t),D(b,t,w)},hide:!x,buttonClick:()=>{I(!0)},properties:{value:b,action:{icon:x?C.Z:S.Z,onClick:()=>v(!x)}}},{type:"text",name:"publicKey",label:"Public Key",disabled:!0,description:"Sent out to other nodes on the mesh to allow them to compute a shared secret key",properties:{value:k}}]},{label:"Admin Settings",description:"Settings for Admin",fields:[{type:"toggle",name:"adminChannelEnabled",label:"Allow Legacy Admin",description:"Allow incoming device control over the insecure legacy admin channel"},{type:"toggle",name:"isManaged",label:"Managed",description:"If true, device configuration options are only able to be changed remotely by a Remote Admin node via admin messages. Do not enable this option unless a suitable Remote Admin node has been setup, and the public key stored in the field below."},{type:"text",name:"adminKey",label:"Admin Key",description:"The public key authorized to send admin messages to this node",validationText:T,inputChange:e=>{var t;let a=null===(t=e.currentTarget)||void 0===t?void 0:t.value;P(a),D(a,y,E)},disabledBy:[{fieldName:"adminChannelEnabled",invert:!0}],properties:{value:B}}]},{label:"Logging Settings",description:"Settings for Logging",fields:[{type:"toggle",name:"debugLogApiEnabled",label:"Enable Debug Log API",description:"Output live debug logging over serial, view and export position-redacted device logs over Bluetooth"},{type:"toggle",name:"serialEnabled",label:"Serial Output Enabled",description:"Serial Console over the Stream API"}]}]}),(0,n.jsx)(eQ,{open:R,onOpenChange:()=>I(!1),onSubmit:()=>A()})]})},eJ=()=>{let{metadata:e}=u(),t=[{label:"Device",element:eE,count:0},{label:"Position",element:eV},{label:"Power",element:eO},{label:"Network",element:e_},{label:"Display",element:eR},{label:"LoRa",element:eI},{label:"Bluetooth",element:eT},{label:"Security",element:eX}];return(0,n.jsxs)(h,{defaultValue:"Device",children:[(0,n.jsx)(x,{children:t.map(e=>(0,n.jsx)(v,{value:e.label,children:e.label},e.label))}),t.map(e=>(0,n.jsx)(y,{value:e.label,children:(0,n.jsx)(e.element,{})},e.label))]})},e0=()=>{let{moduleConfig:e,setWorkingModuleConfig:t}=u();return(0,n.jsx)(Y,{onSubmit:e=>{t(new r.Bj.ModuleConfig.ModuleConfig({payloadVariant:{case:"ambientLighting",value:e}}))},defaultValues:e.ambientLighting,fieldGroups:[{label:"Ambient Lighting Settings",description:"Settings for the Ambient Lighting module",fields:[{type:"toggle",name:"ledState",label:"LED State",description:"Sets LED to on or off"},{type:"number",name:"current",label:"Current",description:"Sets the current for the LED output. Default is 10"},{type:"number",name:"red",label:"Red",description:"Sets the red LED level. Values are 0-255"},{type:"number",name:"green",label:"Green",description:"Sets the green LED level. Values are 0-255"},{type:"number",name:"blue",label:"Blue",description:"Sets the blue LED level. Values are 0-255"}]}]})},e1=()=>{let{moduleConfig:e,setWorkingModuleConfig:t}=u();return(0,n.jsx)(Y,{onSubmit:e=>{t(new r.Bj.ModuleConfig.ModuleConfig({payloadVariant:{case:"detectionSensor",value:e}}))},defaultValues:e.detectionSensor,fieldGroups:[{label:"Detection Sensor Settings",description:"Settings for the Detection Sensor module",fields:[{type:"toggle",name:"enabled",label:"Enabled",description:"Enable or disable Detection Sensor Module"},{type:"number",name:"minimumBroadcastSecs",label:"Minimum Broadcast Seconds",description:"The interval in seconds of how often we can send a message to the mesh when a state change is detected",properties:{suffix:"Seconds"},disabledBy:[{fieldName:"enabled"}]},{type:"number",name:"stateBroadcastSecs",label:"State Broadcast Seconds",description:"The interval in seconds of how often we should send a message to the mesh with the current state regardless of changes",disabledBy:[{fieldName:"enabled"}]},{type:"toggle",name:"sendBell",label:"Send Bell",description:"Send ASCII bell with alert message",disabledBy:[{fieldName:"enabled"}]},{type:"text",name:"name",label:"Friendly Name",description:"Used to format the message sent to mesh, max 20 Characters",disabledBy:[{fieldName:"enabled"}]},{type:"number",name:"monitorPin",label:"Monitor Pin",description:"The GPIO pin to monitor for state changes",disabledBy:[{fieldName:"enabled"}]},{type:"toggle",name:"detectionTriggeredHigh",label:"Detection Triggered High",description:"Whether or not the GPIO pin state detection is triggered on HIGH (1), otherwise LOW (0)",disabledBy:[{fieldName:"enabled"}]},{type:"toggle",name:"usePullup",label:"Use Pullup",description:"Whether or not use INPUT_PULLUP mode for GPIO pin",disabledBy:[{fieldName:"enabled"}]}]}]})},e2=()=>{let{moduleConfig:e,setWorkingModuleConfig:t}=u();return(0,n.jsx)(Y,{onSubmit:e=>{t(new r.Bj.ModuleConfig.ModuleConfig({payloadVariant:{case:"neighborInfo",value:e}}))},defaultValues:e.neighborInfo,fieldGroups:[{label:"Neighbor Info Settings",description:"Settings for the Neighbor Info module",fields:[{type:"toggle",name:"enabled",label:"Enabled",description:"Enable or disable Neighbor Info Module"},{type:"number",name:"updateInterval",label:"Update Interval",description:"Interval in seconds of how often we should try to send our Neighbor Info to the mesh",properties:{suffix:"Seconds"},disabledBy:[{fieldName:"enabled"}]}]}]})},e4=()=>{let{moduleConfig:e,setWorkingModuleConfig:t}=u();return(0,n.jsx)(Y,{onSubmit:e=>{t(new r.Bj.ModuleConfig.ModuleConfig({payloadVariant:{case:"audio",value:e}}))},defaultValues:e.audio,fieldGroups:[{label:"Audio Settings",description:"Settings for the Audio module",fields:[{type:"toggle",name:"codec2Enabled",label:"Codec 2 Enabled",description:"Enable Codec 2 audio encoding"},{type:"number",name:"pttPin",label:"PTT Pin",description:"GPIO pin to use for PTT"},{type:"select",name:"bitrate",label:"Bitrate",description:"Bitrate to use for audio encoding",properties:{enumValue:r.Bj.ModuleConfig.ModuleConfig_AudioConfig_Audio_Baud}},{type:"number",name:"i2sWs",label:"i2S WS",description:"GPIO pin to use for i2S WS"},{type:"number",name:"i2sSd",label:"i2S SD",description:"GPIO pin to use for i2S SD"},{type:"number",name:"i2sDin",label:"i2S DIN",description:"GPIO pin to use for i2S DIN"},{type:"number",name:"i2sSck",label:"i2S SCK",description:"GPIO pin to use for i2S SCK"}]}]})},e5=()=>{let{moduleConfig:e,setWorkingModuleConfig:t}=u();return(0,n.jsx)(Y,{onSubmit:e=>{t(new r.Bj.ModuleConfig.ModuleConfig({payloadVariant:{case:"cannedMessage",value:e}}))},defaultValues:e.cannedMessage,fieldGroups:[{label:"Canned Message Settings",description:"Settings for the Canned Message module",fields:[{type:"toggle",name:"enabled",label:"Module Enabled",description:"Enable Canned Message"},{type:"toggle",name:"rotary1Enabled",label:"Rotary Encoder #1 Enabled",description:"Enable the rotary encoder"},{type:"number",name:"inputbrokerPinA",label:"Encoder Pin A",description:"GPIO Pin Value (1-39) For encoder port A"},{type:"number",name:"inputbrokerPinB",label:"Encoder Pin B",description:"GPIO Pin Value (1-39) For encoder port B"},{type:"number",name:"inputbrokerPinPress",label:"Encoder Pin Press",description:"GPIO Pin Value (1-39) For encoder Press"},{type:"select",name:"inputbrokerEventCw",label:"Clockwise event",description:"Select input event.",properties:{enumValue:r.Bj.ModuleConfig.ModuleConfig_CannedMessageConfig_InputEventChar}},{type:"select",name:"inputbrokerEventCcw",label:"Counter Clockwise event",description:"Select input event.",properties:{enumValue:r.Bj.ModuleConfig.ModuleConfig_CannedMessageConfig_InputEventChar}},{type:"select",name:"inputbrokerEventPress",label:"Press event",description:"Select input event",properties:{enumValue:r.Bj.ModuleConfig.ModuleConfig_CannedMessageConfig_InputEventChar}},{type:"toggle",name:"updown1Enabled",label:"Up Down enabled",description:"Enable the up / down encoder"},{type:"text",name:"allowInputSource",label:"Allow Input Source",description:"Select from: '_any', 'rotEnc1', 'upDownEnc1', 'cardkb'"},{type:"toggle",name:"sendBell",label:"Send Bell",description:"Sends a bell character with each message"}]}]})},e3=()=>{let{moduleConfig:e,setWorkingModuleConfig:t}=u();return(0,n.jsx)(Y,{onSubmit:e=>{t(new r.Bj.ModuleConfig.ModuleConfig({payloadVariant:{case:"externalNotification",value:e}}))},defaultValues:e.externalNotification,fieldGroups:[{label:"External Notification Settings",description:"Configure the external notification module",fields:[{type:"toggle",name:"enabled",label:"Module Enabled",description:"Enable External Notification"},{type:"number",name:"outputMs",label:"Output MS",description:"Output MS",disabledBy:[{fieldName:"enabled"}],properties:{suffix:"ms"}},{type:"number",name:"output",label:"Output",description:"Output",disabledBy:[{fieldName:"enabled"}]},{type:"number",name:"outputVibra",label:"Output Vibrate",description:"Output Vibrate",disabledBy:[{fieldName:"enabled"}]},{type:"number",name:"outputBuzzer",label:"Output Buzzer",description:"Output Buzzer",disabledBy:[{fieldName:"enabled"}]},{type:"toggle",name:"active",label:"Active",description:"Active",disabledBy:[{fieldName:"enabled"}]},{type:"toggle",name:"alertMessage",label:"Alert Message",description:"Alert Message",disabledBy:[{fieldName:"enabled"}]},{type:"toggle",name:"alertMessageVibra",label:"Alert Message Vibrate",description:"Alert Message Vibrate",disabledBy:[{fieldName:"enabled"}]},{type:"toggle",name:"alertMessageBuzzer",label:"Alert Message Buzzer",description:"Alert Message Buzzer",disabledBy:[{fieldName:"enabled"}]},{type:"toggle",name:"alertBell",label:"Alert Bell",description:"Should an alert be triggered when receiving an incoming bell?",disabledBy:[{fieldName:"enabled"}]},{type:"toggle",name:"alertBellVibra",label:"Alert Bell Vibrate",description:"Alert Bell Vibrate",disabledBy:[{fieldName:"enabled"}]},{type:"toggle",name:"alertBellBuzzer",label:"Alert Bell Buzzer",description:"Alert Bell Buzzer",disabledBy:[{fieldName:"enabled"}]},{type:"toggle",name:"usePwm",label:"Use PWM",description:"Use PWM",disabledBy:[{fieldName:"enabled"}]},{type:"number",name:"nagTimeout",label:"Nag Timeout",description:"Nag Timeout",disabledBy:[{fieldName:"enabled"}]},{type:"toggle",name:"useI2sAsBuzzer",label:"Use I\xb2S Pin as Buzzer",description:"Designate I\xb2S Pin as Buzzer Output",disabledBy:[{fieldName:"enabled"}]}]}]})},e6=()=>{var e;let{config:t,moduleConfig:a,setWorkingModuleConfig:l}=u();return(0,n.jsx)(Y,{onSubmit:e=>{l(new r.Bj.ModuleConfig.ModuleConfig({payloadVariant:{case:"mqtt",value:{...e,mapReportSettings:new r.Bj.ModuleConfig.ModuleConfig_MapReportSettings(e.mapReportSettings)}}}))},defaultValues:a.mqtt,fieldGroups:[{label:"MQTT Settings",description:"Settings for the MQTT module",fields:[{type:"toggle",name:"enabled",label:"Enabled",description:"Enable or disable MQTT"},{type:"text",name:"address",label:"MQTT Server Address",description:"MQTT server address to use for default/custom servers",disabledBy:[{fieldName:"enabled"}]},{type:"text",name:"username",label:"MQTT Username",description:"MQTT username to use for default/custom servers",disabledBy:[{fieldName:"enabled"}]},{type:"password",name:"password",label:"MQTT Password",description:"MQTT password to use for default/custom servers",disabledBy:[{fieldName:"enabled"}]},{type:"toggle",name:"encryptionEnabled",label:"Encryption Enabled",description:"Enable or disable MQTT encryption. Note: All messages are sent to the MQTT broker unencrypted if this option is not enabled, even when your uplink channels have encryption keys set. This includes position data.",disabledBy:[{fieldName:"enabled"}]},{type:"toggle",name:"jsonEnabled",label:"JSON Enabled",description:"Whether to send/consume JSON packets on MQTT",disabledBy:[{fieldName:"enabled"}]},{type:"toggle",name:"tlsEnabled",label:"TLS Enabled",description:"Enable or disable TLS",disabledBy:[{fieldName:"enabled"}]},{type:"text",name:"root",label:"Root topic",description:"MQTT root topic to use for default/custom servers",disabledBy:[{fieldName:"enabled"}]},{type:"toggle",name:"proxyToClientEnabled",label:"Proxy to Client Enabled",description:"Use the client's internet connection for MQTT (feature only active in mobile apps)",disabledBy:[{fieldName:"enabled"}]},{type:"toggle",name:"mapReportingEnabled",label:"Map Reporting Enabled",description:"Enable or disable map reporting",disabledBy:[{fieldName:"enabled"}]},{type:"number",name:"mapReportSettings.publishIntervalSecs",label:"Map Report Publish Interval (s)",description:"Interval in seconds to publish map reports",properties:{suffix:"Seconds"},disabledBy:[{fieldName:"enabled"},{fieldName:"mapReportingEnabled"}]},{type:"select",name:"mapReportSettings.positionPrecision",label:"Approximate Location",description:"Position shared will be accurate within this distance",properties:{enumValue:(null===(e=t.display)||void 0===e?void 0:e.units)===0?{"Within 23 km":10,"Within 12 km":11,"Within 5.8 km":12,"Within 2.9 km":13,"Within 1.5 km":14,"Within 700 m":15,"Within 350 m":16,"Within 200 m":17,"Within 90 m":18,"Within 50 m":19}:{"Within 15 miles":10,"Within 7.3 miles":11,"Within 3.6 miles":12,"Within 1.8 miles":13,"Within 0.9 miles":14,"Within 0.5 miles":15,"Within 0.2 miles":16,"Within 600 feet":17,"Within 300 feet":18,"Within 150 feet":19}},disabledBy:[{fieldName:"enabled"},{fieldName:"mapReportingEnabled"}]}]}]})},e8=()=>{let{moduleConfig:e,setWorkingModuleConfig:t}=u();return(0,n.jsx)(Y,{onSubmit:e=>{t(new r.Bj.ModuleConfig.ModuleConfig({payloadVariant:{case:"paxcounter",value:e}}))},defaultValues:e.paxcounter,fieldGroups:[{label:"Paxcounter Settings",description:"Settings for the Paxcounter module",fields:[{type:"toggle",name:"enabled",label:"Module Enabled",description:"Enable Paxcounter"},{type:"number",name:"paxcounterUpdateInterval",label:"Update Interval (seconds)",description:"How long to wait between sending paxcounter packets",properties:{suffix:"Seconds"},disabledBy:[{fieldName:"enabled"}]}]}]})},e7=()=>{let{moduleConfig:e,setWorkingModuleConfig:t}=u();return(0,n.jsx)(Y,{onSubmit:e=>{t(new r.Bj.ModuleConfig.ModuleConfig({payloadVariant:{case:"rangeTest",value:e}}))},defaultValues:e.rangeTest,fieldGroups:[{label:"Range Test Settings",description:"Settings for the Range Test module",fields:[{type:"toggle",name:"enabled",label:"Module Enabled",description:"Enable Range Test"},{type:"number",name:"sender",label:"Message Interval",description:"How long to wait between sending test packets",properties:{suffix:"Seconds"},disabledBy:[{fieldName:"enabled"}]},{type:"toggle",name:"save",label:"Save CSV to storage",description:"ESP32 Only",disabledBy:[{fieldName:"enabled"}]}]}]})},e9=()=>{let{moduleConfig:e,setWorkingModuleConfig:t}=u();return(0,n.jsx)(Y,{onSubmit:e=>{t(new r.Bj.ModuleConfig.ModuleConfig({payloadVariant:{case:"serial",value:e}}))},defaultValues:e.serial,fieldGroups:[{label:"Serial Settings",description:"Settings for the Serial module",fields:[{type:"toggle",name:"enabled",label:"Module Enabled",description:"Enable Serial output"},{type:"toggle",name:"echo",label:"Echo",description:"Any packets you send will be echoed back to your device",disabledBy:[{fieldName:"enabled"}]},{type:"number",name:"rxd",label:"Receive Pin",description:"Set the GPIO pin to the RXD pin you have set up.",disabledBy:[{fieldName:"enabled"}]},{type:"number",name:"txd",label:"Transmit Pin",description:"Set the GPIO pin to the TXD pin you have set up.",disabledBy:[{fieldName:"enabled"}]},{type:"select",name:"baud",label:"Baud Rate",description:"The serial baud rate",disabledBy:[{fieldName:"enabled"}],properties:{enumValue:r.Bj.ModuleConfig.ModuleConfig_SerialConfig_Serial_Baud}},{type:"number",name:"timeout",label:"Timeout",description:"Seconds to wait before we consider your packet as 'done'",disabledBy:[{fieldName:"enabled"}],properties:{suffix:"Seconds"}},{type:"select",name:"mode",label:"Mode",description:"Select Mode",disabledBy:[{fieldName:"enabled"}],properties:{enumValue:r.Bj.ModuleConfig.ModuleConfig_SerialConfig_Serial_Mode,formatEnumName:!0}},{type:"toggle",name:"overrideConsoleSerialPort",label:"Override Console Serial Port",description:"If you have a serial port connected to the console, this will override it."}]}]})},te=()=>{let{moduleConfig:e,setWorkingModuleConfig:t}=u();return(0,n.jsx)(Y,{onSubmit:e=>{t(new r.Bj.ModuleConfig.ModuleConfig({payloadVariant:{case:"storeForward",value:e}}))},defaultValues:e.storeForward,fieldGroups:[{label:"Store & Forward Settings",description:"Settings for the Store & Forward module",fields:[{type:"toggle",name:"enabled",label:"Module Enabled",description:"Enable Store & Forward"},{type:"toggle",name:"heartbeat",label:"Heartbeat Enabled",description:"Enable Store & Forward heartbeat",disabledBy:[{fieldName:"enabled"}]},{type:"number",name:"records",label:"Number of records",description:"Number of records to store",disabledBy:[{fieldName:"enabled"}],properties:{suffix:"Records"}},{type:"number",name:"historyReturnMax",label:"History return max",description:"Max number of records to return",disabledBy:[{fieldName:"enabled"}]},{type:"number",name:"historyReturnWindow",label:"History return window",description:"Max number of records to return",disabledBy:[{fieldName:"enabled"}]}]}]})},tt=()=>{let{moduleConfig:e,setWorkingModuleConfig:t}=u();return(0,n.jsx)(Y,{onSubmit:e=>{t(new r.Bj.ModuleConfig.ModuleConfig({payloadVariant:{case:"telemetry",value:e}}))},defaultValues:e.telemetry,fieldGroups:[{label:"Telemetry Settings",description:"Settings for the Telemetry module",fields:[{type:"number",name:"deviceUpdateInterval",label:"Query Interval",description:"Interval to get telemetry data",properties:{suffix:"Seconds"}},{type:"number",name:"environmentUpdateInterval",label:"Update Interval",description:"How often to send Metrics over the mesh",properties:{suffix:"Seconds"}},{type:"toggle",name:"environmentMeasurementEnabled",label:"Module Enabled",description:"Enable the Environment Telemetry"},{type:"toggle",name:"environmentScreenEnabled",label:"Displayed on Screen",description:"Show the Telemetry Module on the OLED"},{type:"toggle",name:"environmentDisplayFahrenheit",label:"Display Fahrenheit",description:"Display temp in Fahrenheit"},{type:"toggle",name:"airQualityEnabled",label:"Air Quality Enabled",description:"Enable the Air Quality Telemetry"},{type:"number",name:"airQualityInterval",label:"Air Quality Update Interval",description:"How often to send Air Quality data over the mesh"},{type:"toggle",name:"powerMeasurementEnabled",label:"Power Measurement Enabled",description:"Enable the Power Measurement Telemetry"},{type:"number",name:"powerUpdateInterval",label:"Power Update Interval",description:"How often to send Power data over the mesh"},{type:"toggle",name:"powerScreenEnabled",label:"Power Screen Enabled",description:"Enable the Power Telemetry Screen"}]}]})},ta=()=>{let e=[{label:"MQTT",element:e6},{label:"Serial",element:e9},{label:"Ext Notif",element:e3},{label:"S&F",element:te},{label:"Range Test",element:e7},{label:"Telemetry",element:tt},{label:"Canned",element:e5},{label:"Audio",element:e4},{label:"Neighbor Info",element:e2},{label:"Ambient Lighting",element:e0},{label:"Detection Sensor",element:e1},{label:"Paxcounter",element:e8}];return(0,n.jsxs)(h,{defaultValue:"MQTT",children:[(0,n.jsx)(x,{children:e.map(e=>(0,n.jsx)(v,{value:e.label,children:e.label},e.label))}),e.map(e=>(0,n.jsx)(y,{value:e.label,children:(0,n.jsx)(e.element,{})},e.label))]})};var tn=a("7489"),tl=a("4742");let ti=()=>{let{workingConfig:e,workingModuleConfig:t,connection:a}=u(),[l,s]=(0,i.useState)("device"),{toast:o}=eo();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eS,{children:(0,n.jsxs)(ef,{label:"Config Sections",children:[(0,n.jsx)(eg,{label:"Radio Config",active:"device"===l,onClick:()=>s("device"),Icon:ex.Z}),(0,n.jsx)(eg,{label:"Module Config",active:"module"===l,onClick:()=>s("module"),Icon:tn.Z})]})}),(0,n.jsx)(ep,{label:"device"===l?"Radio Config":"Module Config",actions:[{icon:tl.Z,async onClick(){"device"===l?e.map(async e=>await (null==a?void 0:a.setConfig(e).then(()=>o({title:`Config ${e.payloadVariant.case} saved`})))):t.map(async e=>await (null==a?void 0:a.setModuleConfig(e).then(()=>o({title:`Config ${e.payloadVariant.case} saved`})))),await (null==a?void 0:a.commitEditSettings())}}],children:"device"===l?(0,n.jsx)(eJ,{}):(0,n.jsx)(ta,{})})]})},ts=(0,o.Ue)()(e=>({selectedDevice:0,devices:[],currentPage:"messages",rasterSources:[],commandPaletteOpen:!1,darkMode:null!==localStorage.getItem("theme-dark")?"true"===localStorage.getItem("theme-dark"):window.matchMedia("(prefers-color-scheme: dark)").matches,accent:"orange",connectDialogOpen:!1,nodeNumToBeRemoved:0,setRasterSources:t=>{e((0,l.Uy)(e=>{e.rasterSources=t}))},addRasterSource:t=>{e((0,l.Uy)(e=>{e.rasterSources.push(t)}))},removeRasterSource:t=>{e((0,l.Uy)(e=>{e.rasterSources.splice(t,1)}))},setSelectedDevice:t=>e(()=>({selectedDevice:t})),addDevice:t=>e(e=>({devices:[...e.devices,t]})),removeDevice:t=>e(e=>({devices:e.devices.filter(e=>e.id!==t)})),setCommandPaletteOpen:t=>{e((0,l.Uy)(e=>{e.commandPaletteOpen=t}))},setDarkMode:t=>{localStorage.setItem("theme-dark",t.toString()),e((0,l.Uy)(e=>{e.darkMode=t}))},setNodeNumToBeRemoved:t=>e(e=>({nodeNumToBeRemoved:t})),setAccent(t){e((0,l.Uy)(e=>{e.accent=t}))},setConnectDialogOpen:t=>{e((0,l.Uy)(e=>{e.connectDialogOpen=t}))}}));var to=a("7975"),tr=a("7861"),td=a("2173"),tc=a("7304"),tu=a("8333"),tm=a("904"),tp=a("1014"),tf=a("7270"),tg=a("56");let tb=()=>{let{nodes:e,waypoints:t}=u(),{rasterSources:a,darkMode:l}=ts(),{default:s}=(0,tf.Sx)(),[o,r]=(0,i.useState)(0),d=Array.from(e.values()),c=(0,i.useCallback)(()=>{if(!s)return;let e=d.filter(e=>{var t;return null===(t=e.position)||void 0===t?void 0:t.latitudeI});if(!e.length)return;if(1===e.length){var t,a;s.easeTo({zoom:12,center:[((null===(t=e[0].position)||void 0===t?void 0:t.longitudeI)??0)/1e7,((null===(a=e[0].position)||void 0===a?void 0:a.latitudeI)??0)/1e7]});return}let n=(0,td.TuJ)(e.map(e=>{var t,a;return[((null===(t=e.position)||void 0===t?void 0:t.latitudeI)??0)/1e7,((null===(a=e.position)||void 0===a?void 0:a.longitudeI)??0)/1e7]})),l=(0,td.VWR)(n),i=s.cameraForBounds([[l[1],l[0]],[l[3],l[2]]],{padding:{top:10,bottom:10,left:10,right:10}});i&&s.easeTo(i)},[d,s]);return(0,i.useEffect)(()=>{null==s||s.on("zoom",()=>{r((null==s?void 0:s.getZoom())??0)})},[s]),(0,i.useEffect)(()=>{null==s||s.on("load",()=>{c()})},[s,c]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eS,{children:(0,n.jsx)(ef,{label:"Sources",children:a.map(e=>(0,n.jsx)(eg,{label:e.title},e.title))})}),(0,n.jsx)(ep,{label:"Map",noPadding:!0,actions:[{icon:tc.Z,onClick(){null==s||s.zoomIn()}},{icon:tu.Z,onClick(){null==s||s.zoomOut()}},{icon:tm.Z,onClick(){c()}}],children:(0,n.jsxs)(tg.ZP,{mapStyle:"https://raw.githubusercontent.com/hc-oss/maplibre-gl-styles/master/styles/osm-mapnik/v8/default.json",attributionControl:!1,renderWorldCopies:!1,maxPitch:0,style:{filter:l?"brightness(0.6) invert(1) contrast(3) hue-rotate(200deg) saturate(0.3) brightness(0.7)":""},dragRotate:!1,touchZoomRotate:!1,initialViewState:{zoom:1.6,latitude:35,longitude:0},children:[(0,n.jsx)(tf.zB,{style:{background:l?"#ffffff":"",color:l?"black":""}}),t.map(e=>(0,n.jsx)(tf.Jx,{longitude:(e.longitudeI??0)/1e7,latitude:(e.latitudeI??0)/1e7,anchor:"bottom",children:(0,n.jsx)("div",{children:(0,n.jsx)(tp.Z,{size:16})})},e.id)),d.map(e=>{var t,a;if(null===(t=e.position)||void 0===t?void 0:t.latitudeI)return(0,n.jsx)(tf.Jx,{longitude:(e.position.longitudeI??0)/1e7,latitude:(e.position.latitudeI??0)/1e7,style:{filter:l?"invert(1)":""},anchor:"bottom",onClick:()=>{var t,a;null==s||s.easeTo({zoom:12,center:[((null===(t=e.position)||void 0===t?void 0:t.longitudeI)??0)/1e7,((null===(a=e.position)||void 0===a?void 0:a.latitudeI)??0)/1e7]})},children:(0,n.jsxs)("div",{className:"flex cursor-pointer gap-2 rounded-md border bg-backgroundPrimary p-1.5",children:[(0,n.jsx)(to.Hashicon,{value:e.num.toString(),size:22}),(0,n.jsx)(Q,{className:b(o<12&&"hidden"),children:(null===(a=e.user)||void 0===a?void 0:a.longName)||`!${(0,tr.uz)(e.num)}`})]})},e.num)})]})})]})};var th=a("8081"),tx=a("4585"),tv=a("4485");let ty=e=>{var t;let{lastMsgSameUser:a,message:l,sender:i}=e;return a?(0,n.jsxs)("div",{className:"ml-5 flex",children:["ack"===l.state?(0,n.jsx)(th.Z,{size:16,className:"my-auto text-textSecondary"}):"waiting"===l.state?(0,n.jsx)(tx.Z,{size:16,className:"my-auto text-textSecondary"}):(0,n.jsx)(tv.Z,{size:16,className:"my-auto text-textSecondary"}),(0,n.jsx)("span",{className:`ml-4 border-l-2 border-l-backgroundPrimary pl-2 ${"ack"===l.state?"text-textPrimary":"text-textSecondary"}`,children:l.data})]}):(0,n.jsxs)("div",{className:"mx-4 mt-2 gap-2",children:[(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)("div",{className:"w-6 cursor-pointer",children:(0,n.jsx)(to.Hashicon,{value:((null==i?void 0:i.num)??0).toString(),size:32})}),(0,n.jsx)("span",{className:"cursor-pointer font-medium text-textPrimary",children:(null==i?void 0:null===(t=i.user)||void 0===t?void 0:t.longName)??"UNK"}),(0,n.jsx)("span",{className:"mt-1 font-mono text-xs text-textSecondary",children:l.rxTime.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"})})]}),(0,n.jsxs)("div",{className:"ml-1 flex",children:["ack"===l.state?(0,n.jsx)(th.Z,{size:16,className:"my-auto text-textSecondary"}):"waiting"===l.state?(0,n.jsx)(tx.Z,{size:16,className:"my-auto text-textSecondary"}):(0,n.jsx)(tv.Z,{size:16,className:"my-auto text-textSecondary"}),(0,n.jsx)("span",{className:`ml-4 border-l-2 border-l-backgroundPrimary pl-2 ${"ack"===l.state?"text-textPrimary":"text-textSecondary"}`,children:l.data})]})]})};var tj=a("9590");let tN=e=>{let{to:t,channel:a}=e,{connection:l,setMessageState:i,messageDraft:s,setMessageDraft:o,hardware:r}=u(),d=r.myNodeNum,c=async e=>{await (null==l?void 0:l.sendText(e,t,!0,a).then(e=>i("broadcast"===t?"broadcast":"direct",a,t,d,e,"ack")).catch(e=>i("broadcast"===t?"broadcast":"direct",a,t,d,e.id,e.error)))};return(0,n.jsx)("div",{className:"flex gap-2",children:(0,n.jsx)("form",{className:"w-full",onSubmit:e=>{e.preventDefault(),c(s),o("")},children:(0,n.jsxs)("div",{className:"flex flex-grow gap-2",children:[(0,n.jsx)("span",{className:"w-full",children:(0,n.jsx)(w,{autoFocus:!0,minLength:1,placeholder:"Enter Message",value:s,onChange:e=>o(e.target.value)})}),(0,n.jsx)(P,{type:"submit",children:(0,n.jsx)(tj.Z,{size:16})})]})})})},tw=e=>{var t,a,l,i;let{from:s,to:o,route:r}=e,{nodes:d}=u();return 0===r.length?(0,n.jsx)("div",{className:"ml-5 flex",children:(0,n.jsxs)("span",{className:"ml-4 border-l-2 border-l-backgroundPrimary pl-2 text-textPrimary",children:[null==o?void 0:null===(t=o.user)||void 0===t?void 0:t.longName,"↔",null==s?void 0:null===(a=s.user)||void 0===a?void 0:a.longName]})}):(0,n.jsx)("div",{className:"ml-5 flex",children:(0,n.jsxs)("span",{className:"ml-4 border-l-2 border-l-backgroundPrimary pl-2 text-textPrimary",children:[null==o?void 0:null===(l=o.user)||void 0===l?void 0:l.longName,"↔",r.map(e=>{var t;let a=d.get(e);return`${(null==a?void 0:null===(t=a.user)||void 0===t?void 0:t.longName)??((null==a?void 0:a.num)?(0,tr.uz)(a.num):"Unknown")}↔`}),null==s?void 0:null===(i=s.user)||void 0===i?void 0:i.longName]})})};var tC=a("5550");let tS=e=>{let{messages:t,channel:a,to:l,traceroutes:i}=e,{nodes:s}=u();return(0,n.jsxs)("div",{className:"flex flex-grow flex-col",children:[(0,n.jsxs)("div",{className:"flex flex-grow",children:[(0,n.jsx)("div",{className:"flex flex-grow flex-col",children:t?t.map((e,a)=>(0,n.jsx)(ty,{message:e,lastMsgSameUser:0!==a&&t[a-1].from===e.from,sender:s.get(e.from)},e.id)):(0,n.jsxs)("div",{className:"m-auto",children:[(0,n.jsx)(tC.Z,{className:"m-auto"}),(0,n.jsx)(Q,{children:"No Messages"})]})}),(0,n.jsx)("div",{className:`flex flex-grow flex-col border-slate-400 border-l ${void 0===i?"hidden":""}`,children:"broadcast"===l?null:i?i.map((e,t)=>(0,n.jsx)(tw,{from:s.get(e.from),to:s.get(e.to),route:e.data.route},e.id)):(0,n.jsxs)("div",{className:"m-auto",children:[(0,n.jsx)(tC.Z,{className:"m-auto"}),(0,n.jsx)(Q,{children:"No Traceroutes"})]})})]}),(0,n.jsx)("div",{className:"pl-3 pr-3 pt-3 pb-1",children:(0,n.jsx)(tN,{to:l,channel:a})})]})};var tk=a("8513"),tM=a("7342"),tB=a("3444"),tP=a("4288");let tT=()=>{var e,t,a,l,s,o;let{channels:d,nodes:c,hardware:m,messages:p,traceroutes:f,connection:g}=u(),[b,h]=(0,i.useState)("broadcast"),[x,v]=(0,i.useState)(r.Yk.ChannelNumber.Primary),y=Array.from(c.values()).filter(e=>e.num!==m.myNodeNum),j=Array.from(d.values()),N=j.filter(e=>e.role!==r.Bj.Channel.Channel_Role.DISABLED),w=d.get(x),{toast:C}=eo(),S=c.get(x),k=(null==S?void 0:S.num)?(0,tr.uz)(S.num):"Unknown";return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(eS,{children:[(0,n.jsx)(ef,{label:"Channels",children:N.map(e=>{var t,a;return(0,n.jsx)(eg,{label:(null===(t=e.settings)||void 0===t?void 0:t.name.length)?null===(a=e.settings)||void 0===a?void 0:a.name:0===e.index?"Primary":`Ch ${e.index}`,active:x===e.index,onClick:()=>{h("broadcast"),v(e.index)},element:(0,n.jsx)(tk.Z,{size:16,className:"mr-2"})},e.index)})}),(0,n.jsx)(ef,{label:"Nodes",children:y.map(e=>{var t;return(0,n.jsx)(eg,{label:(null===(t=e.user)||void 0===t?void 0:t.longName)??`!${(0,tr.uz)(e.num)}`,active:x===e.num,onClick:()=>{h("direct"),v(e.num)},element:(0,n.jsx)(to.Hashicon,{size:20,value:e.num.toString()})},e.num)})})]}),(0,n.jsx)("div",{className:"flex flex-col flex-grow",children:(0,n.jsxs)(ep,{label:`Messages: ${"broadcast"===b&&w?eB(w):"direct"===b&&c.get(x)?(null===(t=c.get(x))||void 0===t?void 0:null===(e=t.user)||void 0===e?void 0:e.longName)??k:"Loading..."}`,actions:"direct"===b?[{icon:(null===(l=c.get(x))||void 0===l?void 0:null===(a=l.user)||void 0===a?void 0:a.publicKey.length)?tM.Z:tB.Z,iconClasses:(null===(o=c.get(x))||void 0===o?void 0:null===(s=o.user)||void 0===s?void 0:s.publicKey.length)?"text-green-600":"text-yellow-300",async onClick(){var e,t,a;void 0!==(null===(e=c.get(x))||void 0===e?void 0:e.num)&&C({title:(null===(a=c.get(x))||void 0===a?void 0:null===(t=a.user)||void 0===t?void 0:t.publicKey.length)?"Chat is using PKI encryption.":"Chat is using PSK encryption."})}},{icon:tP.Z,async onClick(){var e;let t=null===(e=c.get(x))||void 0===e?void 0:e.num;void 0!==t&&(C({title:"Sending Traceroute, please wait..."}),await (null==g?void 0:g.traceRoute(t).then(()=>C({title:"Traceroute sent."}))))}}]:[],children:[j.map(e=>x===e.index&&(0,n.jsx)(tS,{to:"broadcast",messages:p.broadcast.get(e.index),channel:e.index},e.index)),y.map(e=>x===e.num&&(0,n.jsx)(tS,{to:x,messages:p.direct.get(e.num),channel:r.Yk.ChannelNumber.Primary,traceroutes:f.get(e.num)},e.num))]})})]})},tE=e=>{let{children:t,className:a,...l}=e;return(0,n.jsx)("span",{className:`font-mono text-sm text-textSecondary ${a??""}`,...l,children:t})};var tR=a("1295");let tI=e=>{let{headings:t,rows:a}=e,[l,s]=(0,i.useState)("Last Heard"),[o,r]=(0,i.useState)("desc"),d=e=>{l===e?r("asc"===o?"desc":"asc"):(s(e),r("asc"))},c=a.slice().sort((e,a)=>{if(!l)return 0;let n=t.findIndex(e=>e.title===l),i=e[n].props.children,s=a[n].props.children;if("Last Heard"===l){let e=i.props.timestamp??0,t=s.props.timestamp??0;return e<t?"asc"===o?-1:1:e>t?"asc"===o?1:-1:0}return i<s?"asc"===o?-1:1:i>s?"asc"===o?1:-1:0});return(0,n.jsxs)("table",{className:"min-w-full",children:[(0,n.jsx)("thead",{className:"bg-backgroundPrimary text-sm font-semibold text-textPrimary",children:(0,n.jsx)("tr",{children:t.map(e=>(0,n.jsx)("th",{scope:"col",className:`py-2 pr-3 pl-6 text-left ${e.sortable?"cursor-pointer hover:brightness-hover active:brightness-press":""}`,onClick:()=>e.sortable&&d(e.title),onKeyUp:()=>e.sortable&&d(e.title),children:(0,n.jsxs)("div",{className:"flex gap-2",children:[e.title,l===e.title&&(0,n.jsx)(n.Fragment,{children:"asc"===o?(0,n.jsx)(tR.Z,{size:16}):(0,n.jsx)(E.Z,{size:16})})]})},e.title))})}),(0,n.jsx)("tbody",{children:c.map((e,t)=>(0,n.jsx)("tr",{children:e.map((e,t)=>(0,n.jsx)("td",{className:"whitespace-nowrap py-2 text-sm text-textSecondary first:pl-2",children:e},t))},t))})]})};var tD=a("5682");let tA=e=>{let{timestamp:t}=e;return(0,n.jsx)(tD.Z,{datetime:t,opts:{minInterval:10}})};var t_=a("3889"),tV=a("2986");let tO=()=>{let{nodes:e,hardware:t,setDialogOpen:a}=u(),{setNodeNumToBeRemoved:l}=ts(),s=Array.from(e.values()).filter(e=>e.num!==t.myNodeNum);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eS,{}),(0,n.jsxs)("div",{className:"flex flex-col w-full",children:[(0,n.jsx)("div",{className:"overflow-y-auto h-full",children:(0,n.jsx)(tI,{headings:[{title:"",type:"blank",sortable:!1},{title:"Name",type:"normal",sortable:!0},{title:"Model",type:"normal",sortable:!0},{title:"MAC Address",type:"normal",sortable:!0},{title:"Last Heard",type:"normal",sortable:!0},{title:"SNR",type:"normal",sortable:!0},{title:"Encryption",type:"normal",sortable:!1},{title:"Connection",type:"normal",sortable:!0},{title:"Remove",type:"normal",sortable:!1}],rows:s.map(e=>{var t,s,o,d,c,u,m,p;return[(0,n.jsx)(to.Hashicon,{size:24,value:e.num.toString()},"icon"),(0,n.jsx)("h1",{children:(null===(t=e.user)||void 0===t?void 0:t.longName)??((null===(s=e.user)||void 0===s?void 0:s.macaddr)?`Meshtastic ${tV.YU.stringify((null===(o=e.user)||void 0===o?void 0:o.macaddr.subarray(4,6))??[]).toLowerCase()}`:`!${(0,tr.uz)(e.num)}`)},"header"),(0,n.jsx)(tE,{children:r.Bj.Mesh.HardwareModel[(null===(d=e.user)||void 0===d?void 0:d.hwModel)??0]},"model"),(0,n.jsx)(tE,{children:(null===(c=tV.YU.stringify((null===(u=e.user)||void 0===u?void 0:u.macaddr)??[]).match(/.{1,2}/g))||void 0===c?void 0:c.join(":"))??"UNK"},"addr"),(0,n.jsx)(i.Fragment,{children:0===e.lastHeard?(0,n.jsx)("p",{children:"Never"}):(0,n.jsx)(tA,{timestamp:1e3*e.lastHeard})},"lastHeard"),(0,n.jsxs)(tE,{children:[e.snr,"db/",Math.min(Math.max((e.snr+10)*5,0),100),"%/",(e.snr+10)*5,"raw"]},"snr"),(0,n.jsx)(tE,{children:(null===(m=e.user)||void 0===m?void 0:m.publicKey)&&(null===(p=e.user)||void 0===p?void 0:p.publicKey.length)>0?(0,n.jsx)(tM.Z,{className:"text-green-600"}):(0,n.jsx)(tB.Z,{className:"text-yellow-300"})},"pki"),(0,n.jsxs)(tE,{children:[0!==e.lastHeard?!1===e.viaMqtt&&0===e.hopsAway?"Direct":`${e.hopsAway.toString()} ${e.hopsAway>1?"hops":"hop"} away`:"-",!0===e.viaMqtt?", via MQTT":""]},"hops"),(0,n.jsxs)(P,{variant:"destructive",onClick:()=>{l(e.num),a("nodeRemoval",!0)},children:[(0,n.jsx)(t_.Z,{}),"Remove"]},"remove")]})})}),(0,n.jsx)(em,{})]})]})},tU=()=>{let{activePage:e}=u();return(0,n.jsxs)(n.Fragment,{children:["messages"===e&&(0,n.jsx)(tT,{}),"map"===e&&(0,n.jsx)(tb,{}),"config"===e&&(0,n.jsx)(ti,{}),"channels"===e&&(0,n.jsx)(eP,{}),"nodes"===e&&(0,n.jsx)(tO,{})]})};var tz=a("1410"),tZ=a("8086");let tL=i.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)(tz.mY,{ref:t,className:b("flex h-full w-full flex-col overflow-hidden rounded-lg bg-white dark:bg-slate-800",a),...l})});tL.displayName=tz.mY.displayName;let tW=e=>{let{children:t,...a}=e;return(0,n.jsx)(eZ,{...a,children:(0,n.jsx)(eG,{className:"overflow-hidden p-0 shadow-2xl [&_[dialog-overlay]]:bg-red-100",children:(0,n.jsx)(tL,{className:"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-slate-500 [&_[cmdk-group]]:px-2 [&_[cmdk-group]_+[cmdk-group]]:pt-0 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5",children:t})})})},tG=i.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsxs)("div",{className:"flex items-center border-b border-b-slate-100 px-4 dark:border-b-slate-700","cmdk-input-wrapper":"",children:[(0,n.jsx)(tZ.Z,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,n.jsx)(tz.mY.Input,{ref:t,className:b("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-slate-400 disabled:cursor-not-allowed disabled:opacity-50 dark:text-slate-50",a),...l})]})});tG.displayName=tz.mY.Input.displayName;let tF=i.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)(tz.mY.List,{ref:t,className:b("max-h-[300px] overflow-y-auto overflow-x-hidden",a),...l})});tF.displayName=tz.mY.List.displayName;let tK=i.forwardRef((e,t)=>(0,n.jsx)(tz.mY.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));tK.displayName=tz.mY.Empty.displayName;let tH=i.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)(tz.mY.Group,{ref:t,className:b("overflow-hidden py-3 px-2 text-slate-700 dark:text-slate-400 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:pb-1.5 [&_[cmdk-group-heading]]:text-sm [&_[cmdk-group-heading]]:font-semibold [&_[cmdk-group-heading]]:text-slate-900 [&_[cmdk-group-heading]]:dark:text-slate-300",a),...l})});tH.displayName=tz.mY.Group.displayName,i.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)(tz.mY.Separator,{ref:t,className:b("-mx-1 h-px bg-slate-100 dark:bg-slate-700",a),...l})}).displayName=tz.mY.Separator.displayName;let t$=i.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)(tz.mY.Item,{ref:t,className:b("relative flex cursor-default select-none items-center rounded-md py-1.5 px-2 text-sm font-medium outline-none aria-selected:bg-slate-100 data-[disabled='true']:pointer-events-none data-[disabled='true']:opacity-50 dark:aria-selected:bg-slate-700",a),...l})});t$.displayName=tz.mY.Item.displayName;var tQ=a("3795"),tY=a("7088"),tq=a("2991"),tX=a("2541"),tJ=a("4453"),t0=a("3802"),t1=a("7564"),t2=a("8212"),t4=a("5346"),t5=a("4515"),t3=a("6868"),t6=a("6608"),t8=a("7681");let t7=()=>{let{commandPaletteOpen:e,setCommandPaletteOpen:t,setSelectedDevice:a,removeDevice:l,selectedDevice:s,darkMode:o,setDarkMode:r,setAccent:c}=ts(),{getDevices:m}=d(),{setDialogOpen:p,setActivePage:f,connection:g}=u(),b=[{label:"Goto",icon:tQ.Z,commands:[{label:"Messages",icon:eb.Z,action(){f("messages")}},{label:"Map",icon:eh.Z,action(){f("map")}},{label:"Config",icon:ex.Z,action(){f("config")},tags:["settings"]},{label:"Channels",icon:ev.Z,action(){f("channels")}},{label:"Nodes",icon:ey.Z,action(){f("nodes")}}]},{label:"Manage",icon:tY.Z,commands:[{label:"Switch Node",icon:tq.Z,subItems:m().map(e=>{var t,l;return{label:(null===(l=e.nodes.get(e.hardware.myNodeNum))||void 0===l?void 0:null===(t=l.user)||void 0===t?void 0:t.longName)??e.hardware.myNodeNum.toString(),icon:(0,n.jsx)(to.Hashicon,{size:16,value:e.hardware.myNodeNum.toString()}),action(){a(e.id)}}})},{label:"Connect New Node",icon:tX.Z,action(){a(0)}}]},{label:"Contextual",icon:tm.Z,commands:[{label:"QR Code",icon:eM.Z,subItems:[{label:"Generator",icon:(0,n.jsx)(eM.Z,{size:16}),action(){p("QR",!0)}},{label:"Import",icon:(0,n.jsx)(eM.Z,{size:16}),action(){p("import",!0)}}]},{label:"Disconnect",icon:tJ.Z,action(){null==g||g.disconnect(),a(0),l(s??0)}},{label:"Schedule Shutdown",icon:t0.Z,action(){p("shutdown",!0)}},{label:"Schedule Reboot",icon:t1.Z,action(){p("reboot",!0)}},{label:"Reset Nodes",icon:t_.Z,action(){null==g||g.resetNodes()}},{label:"Factory Reset Device",icon:t2.Z,action(){null==g||g.factoryResetDevice()}},{label:"Factory Reset Config",icon:t2.Z,action(){null==g||g.factoryResetConfig()}}]},{label:"Debug",icon:t4.Z,commands:[{label:"Reconfigure",icon:t1.Z,action(){null==g||g.configure()}},{label:"[WIP] Clear Messages",icon:t5.Z,action(){alert("This feature is not implemented")}}]},{label:"Application",icon:t3.Z,commands:[{label:"Toggle Dark Mode",icon:t6.Z,action(){r(!o)}},{label:"Accent Color",icon:t8.Z,subItems:[{label:"Red",icon:(0,n.jsx)("span",{className:`h-3 w-3 rounded-full ${o?"bg-[#f25555]":"bg-[#f28585]"}`}),action(){c("red")}},{label:"Orange",icon:(0,n.jsx)("span",{className:`h-3 w-3 rounded-full ${o?"bg-[#e1720b]":"bg-[#edb17a]"}`}),action(){c("orange")}},{label:"Yellow",icon:(0,n.jsx)("span",{className:`h-3 w-3 rounded-full ${o?"bg-[#ac8c1a]":"bg-[#e0cc87]"}`}),action(){c("yellow")}},{label:"Green",icon:(0,n.jsx)("span",{className:`h-3 w-3 rounded-full ${o?"bg-[#27a341]":"bg-[#8bc9c5]"}`}),action(){c("green")}},{label:"Blue",icon:(0,n.jsx)("span",{className:`h-3 w-3 rounded-full ${o?"bg-[#2093fe]":"bg-[#70afea]"}`}),action(){c("blue")}},{label:"Purple",icon:(0,n.jsx)("span",{className:`h-3 w-3 rounded-full ${o?"bg-[#926bff]":"bg-[#a09eef]"}`}),action(){c("purple")}},{label:"Pink",icon:(0,n.jsx)("span",{className:`h-3 w-3 rounded-full ${o?"bg-[#e454c4]":"bg-[#dba0c7]"}`}),action(){c("pink")}}]}]}];return(0,i.useEffect)(()=>{let e=e=>{"k"===e.key&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),t(!0))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[t]),(0,n.jsxs)(tW,{open:e,onOpenChange:t,children:[(0,n.jsx)(tG,{placeholder:"Type a command or search..."}),(0,n.jsxs)(tF,{children:[(0,n.jsx)(tK,{children:"No results found."}),b.map(e=>(0,n.jsx)(tH,{heading:e.label,children:e.commands.map(e=>{var a;return(0,n.jsxs)("div",{children:[(0,n.jsxs)(t$,{onSelect:()=>{var a;null===(a=e.action)||void 0===a||a.call(e),t(!1)},children:[(0,n.jsx)(e.icon,{size:16,className:"mr-2"}),e.label]}),null===(a=e.subItems)||void 0===a?void 0:a.map(e=>(0,n.jsx)(t9,{label:e.label,icon:e.icon,action:e.action},e.label))]},e.label)})},e.label))]})]})},t9=e=>{let{label:t,icon:a,action:l}=e;return(0,tz.U8)(e=>e.search)?(0,n.jsxs)(t$,{onSelect:l,children:[a,t]}):null},ae=e=>{let{active:t,onClick:a,children:l}=e;return(0,n.jsxs)("li",{className:"aspect-w-1 aspect-h-1 relative w-full",onClick:a,onKeyDown:a,children:[t&&(0,n.jsx)("div",{className:"absolute -left-2 h-10 w-1.5 rounded-full bg-accent"}),(0,n.jsx)("div",{className:"flex aspect-square cursor-pointer flex-col items-center justify-center",children:l})]})};var at=a("8480");let aa=i.forwardRef((e,t)=>{let{className:a,orientation:l="horizontal",decorative:i=!0,...s}=e;return(0,n.jsx)(at.f,{ref:t,decorative:i,orientation:l,className:b("bg-slate-200 dark:bg-slate-700","horizontal"===l?"h-[1px] w-full":"h-full w-[1px]",a),...s})});aa.displayName=at.f.displayName;let an=e=>{let{children:t}=e;return(0,n.jsx)("code",{className:"relative rounded bg-slate-100 px-[0.3rem] py-[0.2rem] font-mono text-sm font-semibold text-slate-900 dark:bg-slate-800 dark:text-slate-400",children:t})};var al=a("6302"),ai=a("849"),as=a("7933");let ao=()=>{let{getDevices:e}=d(),{selectedDevice:t,setSelectedDevice:a,darkMode:l,setDarkMode:i,setCommandPaletteOpen:s,setConnectDialogOpen:o}=ts();return(0,n.jsxs)("nav",{className:"flex flex-col justify-between border-r-[0.5px] border-slate-300 bg-transparent pt-2 dark:border-slate-700",children:[(0,n.jsx)("div",{className:"flex flex-col overflow-y-hidden",children:(0,n.jsxs)("ul",{className:"flex w-20 grow flex-col items-center space-y-4 bg-transparent py-4 px-5",children:[(0,n.jsx)(ae,{active:0===t,onClick:()=>{a(0)},children:(0,n.jsx)(al.Z,{})}),e().map(e=>(0,n.jsx)(ae,{onClick:()=>{a(e.id)},active:t===e.id,children:(0,n.jsx)(to.Hashicon,{size:24,value:e.hardware.myNodeNum.toString()})},e.id)),(0,n.jsx)(aa,{}),(0,n.jsx)("button",{type:"button",onClick:()=>o(!0),className:"transition-all duration-300 hover:text-accent",children:(0,n.jsx)(tX.Z,{})})]})}),(0,n.jsxs)("div",{className:"flex w-20 flex-col items-center space-y-5 bg-transparent px-5 pb-5",children:[(0,n.jsx)("button",{type:"button",className:"transition-all hover:text-accent",onClick:()=>i(!l),children:l?(0,n.jsx)(ai.Z,{}):(0,n.jsx)(t6.Z,{})}),(0,n.jsx)("button",{type:"button",className:"transition-all hover:text-accent",onClick:()=>s(!0),children:(0,n.jsx)(tZ.Z,{})}),(0,n.jsx)("button",{type:"button",className:"transition-all hover:text-accent",children:(0,n.jsx)(as.Z,{})}),(0,n.jsx)(aa,{}),(0,n.jsx)(an,{children:"94c6eea"})]})]})},ar=e=>{var t,a;let{open:l,onOpenChange:i}=e,{connection:s,nodes:o,removeNode:r}=u(),{nodeNumToBeRemoved:d}=ts(),c=()=>{null==s||s.removeNodeByNum(d),r(d),i(!1)};return(0,n.jsx)(eZ,{open:l,onOpenChange:i,children:(0,n.jsxs)(eG,{children:[(0,n.jsxs)(eF,{children:[(0,n.jsx)(eH,{children:"Remove Node?"}),(0,n.jsx)(e$,{children:"Are you sure you want to remove this Node?"})]}),(0,n.jsx)("div",{className:"gap-4",children:(0,n.jsx)("form",{onSubmit:c,children:(0,n.jsx)(K,{children:null===(a=o.get(d))||void 0===a?void 0:null===(t=a.user)||void 0===t?void 0:t.longName})})}),(0,n.jsx)(eK,{children:(0,n.jsx)(P,{variant:"destructive",onClick:()=>c(),children:"Remove"})})]})})},ad=e=>{var t,a;let{open:l,onOpenChange:i}=e,{hardware:s,nodes:o,connection:d}=u(),c=o.get(s.myNodeNum),{register:m,handleSubmit:p}=(0,k.cI)({values:{longName:(null==c?void 0:null===(t=c.user)||void 0===t?void 0:t.longName)??"Unknown",shortName:(null==c?void 0:null===(a=c.user)||void 0===a?void 0:a.shortName)??"Unknown"}}),f=p(e=>{null==d||d.setOwner(new r.Bj.Mesh.User({...null==c?void 0:c.user,...e})),i(!1)});return(0,n.jsx)(eZ,{open:l,onOpenChange:i,children:(0,n.jsxs)(eG,{children:[(0,n.jsxs)(eF,{children:[(0,n.jsx)(eH,{children:"Change Device Name"}),(0,n.jsx)(e$,{children:"The Device will restart once the config is saved."})]}),(0,n.jsx)("div",{className:"gap-4",children:(0,n.jsxs)("form",{onSubmit:f,children:[(0,n.jsx)(K,{children:"Long Name"}),(0,n.jsx)(w,{...m("longName")}),(0,n.jsx)(K,{children:"Short Name"}),(0,n.jsx)(w,{maxLength:4,...m("shortName")})]})}),(0,n.jsx)(eK,{children:(0,n.jsx)(P,{onClick:()=>f(),children:"Save"})})]})})};var ac=a("8953");let au=i.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)(ac.fC,{ref:t,className:b("peer h-4 w-4 shrink-0 rounded-sm border border-slate-300 focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-slate-700 dark:text-slate-50 dark:focus:ring-slate-400 dark:focus:ring-offset-slate-900",a),...l,children:(0,n.jsx)(ac.z$,{className:b("flex items-center justify-center"),children:(0,n.jsx)(R.Z,{className:"h-4 w-4"})})})});au.displayName=ac.fC.displayName;let am=e=>{var t;let{open:a,onOpenChange:l}=e,[s,o]=(0,i.useState)(""),[d,c]=(0,i.useState)(),[m,p]=(0,i.useState)(!1),{connection:f}=u();return(0,i.useEffect)(()=>{try{let e=new URL(s);if("meshtastic.org"!==e.hostname&&"/e/"!==e.pathname||!e.hash)throw"Invalid Meshtastic URL";let t=e.hash.substring(1),a=t.padEnd(t.length+(4-t.length%4)%4,"=").replace(/-/g,"+").replace(/_/g,"/");c(r.Bj.AppOnly.ChannelSet.fromBinary((0,er.toByteArray)(a))),p(!0)}catch(e){p(!1),c(void 0)}},[s]),(0,n.jsx)(eZ,{open:a,onOpenChange:l,children:(0,n.jsxs)(eG,{children:[(0,n.jsxs)(eF,{children:[(0,n.jsx)(eH,{children:"Import Channel Set"}),(0,n.jsx)(e$,{children:"The current LoRa configuration will be overridden."})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,n.jsx)(K,{children:"Channel Set/QR Code URL"}),(0,n.jsx)(w,{value:s,suffix:m?"✅":"❌",onChange:e=>{o(e.target.value)}}),m&&(0,n.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,n.jsx)("div",{className:"flex w-full gap-2",children:(0,n.jsxs)("div",{className:"w-36",children:[(0,n.jsx)(K,{children:"Use Preset?"}),(0,n.jsx)(L,{disabled:!0,checked:(null==d?void 0:null===(t=d.loraConfig)||void 0===t?void 0:t.usePreset)??!0})]})}),(0,n.jsx)("span",{className:"text-md block font-medium text-textPrimary",children:"Channels:"}),(0,n.jsx)("div",{className:"flex w-40 flex-col gap-1",children:null==d?void 0:d.settings.map(e=>(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)(K,{children:e.name.length?e.name:`Channel: ${e.id}`}),(0,n.jsx)(au,{},e.id)]},e.id))})]})]}),(0,n.jsx)(eK,{children:(0,n.jsx)(P,{onClick:()=>{null==d||d.settings.map((e,t)=>{null==f||f.setChannel(new r.Bj.Channel.Channel({index:t,role:0===t?r.Bj.Channel.Channel_Role.PRIMARY:r.Bj.Channel.Channel_Role.SECONDARY,settings:e}))}),(null==d?void 0:d.loraConfig)&&(null==f||f.setConfig(new r.Bj.Config.Config({payloadVariant:{case:"lora",value:d.loraConfig}})))},disabled:!m,children:"Apply"})})]})})};var ap=a("6922"),af=a("3656");let ag=e=>{let{open:t,onOpenChange:a,loraConfig:l,channels:s}=e,[o,d]=(0,i.useState)([0]),[c,u]=(0,i.useState)(""),[m,p]=(0,i.useState)(),f=(0,i.useMemo)(()=>Array.from(s.values()),[s]);return(0,i.useEffect)(()=>{let e=f.filter(e=>o.includes(e.index)).map(e=>e.settings).filter(e=>!!e),t=new r.Bj.AppOnly.ChannelSet(new r.Bj.AppOnly.ChannelSet({loraConfig:l,settings:e})),a=(0,er.fromByteArray)(t.toBinary()).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_");u(`https://meshtastic.org/e/${m?"?add=true":""}#${a}`)},[f,o,m,l]),(0,n.jsx)(eZ,{open:t,onOpenChange:a,children:(0,n.jsxs)(eG,{children:[(0,n.jsxs)(eF,{children:[(0,n.jsx)(eH,{children:"Generate QR Code"}),(0,n.jsx)(e$,{children:"The current LoRa configuration will also be shared."})]}),(0,n.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,n.jsxs)("div",{className:"flex gap-3 px-4 py-5 sm:p-6",children:[(0,n.jsx)("div",{className:"flex w-40 flex-col gap-2",children:f.map(e=>{var t;return(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)(K,{children:(null===(t=e.settings)||void 0===t?void 0:t.name.length)?e.settings.name:e.role===r.Bj.Channel.Channel_Role.PRIMARY?"Primary":`Channel: ${e.index}`}),(0,n.jsx)(au,{checked:o.includes(e.index),onCheckedChange:()=>{o.includes(e.index)?d(o.filter(t=>t!==e.index)):d([...o,e.index])}},e.index)]},e.index)})}),(0,n.jsx)(af.QRCode,{value:c,size:200,qrStyle:"dots"})]}),(0,n.jsxs)("div",{className:"flex justify-center",children:[(0,n.jsx)("button",{type:"button",className:`border-black border-t border-l border-b rounded-l h-10 px-7 py-2 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 ${m?"focus:ring-green-800 bg-green-800 text-white":"focus:ring-slate-400 bg-slate-400 hover:bg-green-600"}`,onClick:()=>p(!0),children:"Add Channels"}),(0,n.jsx)("button",{type:"button",className:`border-black border-t border-r border-b rounded-r h-10 px-4 py-2 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 ${m?"focus:ring-slate-400 bg-slate-400 hover:bg-green-600":"focus:ring-green-800 bg-green-800 text-white"}`,onClick:()=>p(!1),children:"Replace Channels"})]})]}),(0,n.jsxs)(eK,{children:[(0,n.jsx)(K,{children:"Sharable URL"}),(0,n.jsx)(w,{value:c,disabled:!0,action:{icon:ap.Z,onClick(){navigator.clipboard.writeText(c)}}})]})]})})};var ab=a("6834");let ah=e=>{let{open:t,onOpenChange:a}=e,{connection:l}=u(),[s,o]=(0,i.useState)(5);return(0,n.jsx)(eZ,{open:t,onOpenChange:a,children:(0,n.jsxs)(eG,{children:[(0,n.jsxs)(eF,{children:[(0,n.jsx)(eH,{children:"Schedule Reboot"}),(0,n.jsx)(e$,{children:"Reboot the connected node after x minutes."})]}),(0,n.jsxs)("div",{className:"flex gap-2 p-4",children:[(0,n.jsx)(w,{type:"number",value:s,onChange:e=>o(Number.parseInt(e.target.value)),action:{icon:ab.Z,onClick(){null==l||l.reboot(60*s).then(()=>a(!1))}}}),(0,n.jsxs)(P,{className:"w-24",onClick:()=>{null==l||l.reboot(2).then(()=>a(!1))},children:[(0,n.jsx)(t1.Z,{className:"mr-2",size:16}),"Now"]})]})]})})},ax=e=>{let{open:t,onOpenChange:a}=e,{connection:l}=u(),[s,o]=(0,i.useState)(5);return(0,n.jsx)(eZ,{open:t,onOpenChange:a,children:(0,n.jsxs)(eG,{children:[(0,n.jsxs)(eF,{children:[(0,n.jsx)(eH,{children:"Schedule Shutdown"}),(0,n.jsx)(e$,{children:"Turn off the connected node after x minutes."})]}),(0,n.jsxs)("div",{className:"flex gap-2 p-4",children:[(0,n.jsx)(w,{type:"number",value:s,onChange:e=>o(Number.parseInt(e.target.value)),suffix:"Minutes"}),(0,n.jsx)(P,{className:"w-24",onClick:()=>{null==l||l.shutdown(60*s).then(()=>a(!1))},children:(0,n.jsx)(ab.Z,{size:16})}),(0,n.jsxs)(P,{className:"w-24",onClick:()=>{null==l||l.shutdown(2).then(()=>()=>a(!1))},children:[(0,n.jsx)(t0.Z,{className:"mr-2",size:16}),"Now"]})]})]})})},av=()=>{let{channels:e,config:t,dialog:a,setDialogOpen:l}=u();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ag,{open:a.QR,onOpenChange:e=>{l("QR",e)},channels:e,loraConfig:t.lora}),(0,n.jsx)(am,{open:a.import,onOpenChange:e=>{l("import",e)},loraConfig:t.lora}),(0,n.jsx)(ax,{open:a.shutdown,onOpenChange:()=>{l("shutdown",!1)}}),(0,n.jsx)(ah,{open:a.reboot,onOpenChange:()=>{l("reboot",!1)}}),(0,n.jsx)(ad,{open:a.deviceName,onOpenChange:e=>{l("deviceName",e)}}),(0,n.jsx)(ar,{open:a.nodeRemoval,onOpenChange:e=>{l("nodeRemoval",e)}})]})},ay=(e,t)=>{let a=0;t.events.onDeviceMetadataPacket.subscribe(t=>{e.addMetadata(t.from,t.data)}),t.events.onRoutingPacket.subscribe(e=>{switch(e.data.variant.case){case"errorReason":if(e.data.variant.value===r.Bj.Mesh.Routing_Error.NONE)return;console.log(`Routing Error: ${e.data.variant.value}`);break;case"routeReply":console.log(`Route Reply: ${e.data.variant.value}`);break;case"routeRequest":console.log(`Route Request: ${e.data.variant.value}`)}}),t.events.onTelemetryPacket.subscribe(e=>{}),t.events.onDeviceStatus.subscribe(t=>{e.setStatus(t)}),t.events.onWaypointPacket.subscribe(t=>{let{data:a,...n}=t;e.addWaypoint(a)}),t.events.onMyNodeInfo.subscribe(t=>{e.setHardware(t),a=t.myNodeNum}),t.events.onUserPacket.subscribe(t=>{e.addUser(t)}),t.events.onPositionPacket.subscribe(t=>{e.addPosition(t)}),t.events.onNodeInfoPacket.subscribe(t=>{e.addNodeInfo(t)}),t.events.onChannelPacket.subscribe(t=>{e.addChannel(t)}),t.events.onConfigPacket.subscribe(t=>{e.setConfig(t)}),t.events.onModuleConfigPacket.subscribe(t=>{e.setModuleConfig(t)}),t.events.onMessagePacket.subscribe(t=>{e.addMessage({...t,state:t.from!==a?"ack":"waiting"})}),t.events.onTraceRoutePacket.subscribe(t=>{e.addTraceRoute({...t})}),t.events.onPendingSettingsChange.subscribe(t=>{e.setPendingSettingsChanges(t)}),t.events.onMeshPacket.subscribe(t=>{e.processPacket({from:t.from,snr:t.rxSnr,time:t.rxTime})})},aj=()=>Math.floor(1e9*Math.random()),aN=e=>{let{href:t,children:a}=e;return(0,n.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"font-medium text-slate-900 underline underline-offset-4 dark:text-slate-50",children:a})},aw=[{label:"HTTP",element:e=>{let{closeDialog:t}=e,{addDevice:a}=d(),{setSelectedDevice:l}=ts(),{register:s,handleSubmit:o,control:c}=(0,k.cI)({defaultValues:{ip:window.location.host+(new URLSearchParams(window.location.search).get("path")||"/meshtastic/web"),tls:"https:"===location.protocol}}),u=(0,k.qo)({control:c,name:"tls",defaultValue:"https:"===location.protocol}),[m,p]=(0,i.useState)(!1),f=o(async e=>{p(!0);let n=aj(),i=a(n),s=new r.kW(n);await s.connect({address:e.ip,fetchInterval:2e3,tls:e.tls}),l(n),i.addConnection(s),ay(i,s),t()});return(0,n.jsxs)("form",{className:"flex w-full flex-col gap-2 p-4",onSubmit:f,children:[(0,n.jsxs)("div",{className:"flex h-48 flex-col gap-2",children:[(0,n.jsx)(K,{children:"IP Address/Hostname"}),(0,n.jsx)(w,{prefix:u?"https://":"http://",placeholder:"000.000.000.000 / meshtastic.local",disabled:m,...s("ip")}),(0,n.jsx)(k.Qr,{name:"tls",control:c,render:e=>{let{field:{value:t,...a}}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(K,{children:"Use TLS"}),(0,n.jsx)(L,{disabled:"https:"===location.protocol||m,checked:t,...a})]})}})]}),(0,n.jsx)(P,{type:"submit",disabled:m,children:(0,n.jsx)("span",{children:m?"Connecting...":"Connect"})})]})},disabled:!1,disabledMessage:"Unsuported connection method"},{label:"Bluetooth",element:e=>{let{closeDialog:t}=e,[a,l]=(0,i.useState)([]),{addDevice:s}=d(),{setSelectedDevice:o}=ts(),c=(0,i.useCallback)(async()=>{l(await navigator.bluetooth.getDevices())},[]);(0,i.useEffect)(()=>{c()},[c]);let u=async e=>{let a=aj(),n=s(a);o(a);let l=new r.Bb(a);await l.connect({device:e}),n.addConnection(l),ay(n,l),t()};return(0,n.jsxs)("div",{className:"flex w-full flex-col gap-2 p-4",children:[(0,n.jsxs)("div",{className:"flex h-48 flex-col gap-2 overflow-y-auto",children:[a.map(e=>(0,n.jsx)(P,{onClick:()=>{u(e)},children:e.name},e.id)),0===a.length&&(0,n.jsx)(tE,{className:"m-auto select-none",children:"No devices paired yet."})]}),(0,n.jsx)(P,{onClick:async()=>{await navigator.bluetooth.requestDevice({filters:[{services:[r.gT.ServiceUuid]}]}).then(e=>{-1===a.findIndex(t=>t.id===e.id)&&l(a.concat(e))})},children:(0,n.jsx)("span",{children:"New device"})})]})},disabled:!navigator.bluetooth,disabledMessage:"Web Bluetooth is currently only supported by Chromium-based browsers",disabledLink:"https://developer.mozilla.org/en-US/docs/Web/API/Web_Serial_API#browser_compatibility"},{label:"Serial",element:e=>{let{closeDialog:t}=e,[a,l]=(0,i.useState)([]),{addDevice:s}=d(),{setSelectedDevice:o}=ts(),c=(0,i.useCallback)(async()=>{l(await navigator.serial.getPorts())},[]);navigator.serial.addEventListener("connect",()=>{c()}),navigator.serial.addEventListener("disconnect",()=>{c()}),(0,i.useEffect)(()=>{c()},[c]);let u=async e=>{let a=aj(),n=s(a);o(a);let l=new r.EG(a);await l.connect({port:e,baudRate:void 0,concurrentLogOutput:!0}).catch(e=>console.log(`Unable to Connect: ${e.message}`)),n.addConnection(l),ay(n,l),t()};return(0,n.jsxs)("div",{className:"flex w-full flex-col gap-2 p-4",children:[(0,n.jsxs)("div",{className:"flex h-48 flex-col gap-2 overflow-y-auto",children:[a.map((e,t)=>{let{usbProductId:a,usbVendorId:l}=e.getInfo();return(0,n.jsx)(P,{disabled:null!==e.readable,onClick:async()=>{await u(e)},children:`# ${t} - ${l??"UNK"} - ${a??"UNK"}`},`${l??"UNK"}-${a??"UNK"}-${t}`)}),0===a.length&&(0,n.jsx)(tE,{className:"m-auto select-none",children:"No devices paired yet."})]}),(0,n.jsx)(P,{onClick:async()=>{await navigator.serial.requestPort().then(e=>{l(a.concat(e))})},children:(0,n.jsx)("span",{children:"New device"})})]})},disabled:!navigator.serial,disabledMessage:"WebSerial is currently only supported by Chromium based browsers: https://developer.mozilla.org/en-US/docs/Web/API/Web_Bluetooth_API#browser_compatibility"}],aC=e=>{let{open:t,onOpenChange:a}=e;return(0,n.jsx)(eZ,{open:t,onOpenChange:a,children:(0,n.jsxs)(eG,{children:[(0,n.jsx)(eF,{children:(0,n.jsx)(eH,{children:"Connect New Device"})}),(0,n.jsxs)(h,{defaultValue:"HTTP",children:[(0,n.jsx)(x,{children:aw.map(e=>(0,n.jsx)(v,{value:e.label,disabled:e.disabled,children:e.label},e.label))}),aw.map(e=>(0,n.jsx)(y,{value:e.label,children:e.disabled?(0,n.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:e.disabledMessage}):(0,n.jsx)(e.element,{closeDialog:()=>a(!1)})},e.label))]}),(!navigator.bluetooth||!navigator.serial)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Q,{children:"Web Bluetooth and Web Serial are currently only supported by Chromium-based browsers."}),(0,n.jsxs)(Q,{children:["Read more:\xa0",(0,n.jsx)(aN,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Web_Bluetooth_API#browser_compatibility",children:"Web Bluetooth"}),"\xa0",(0,n.jsx)(aN,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Web_Serial_API#browser_compatibility",children:"Web Serial"})]})]})]})})};var aS=a("2914");let ak=aS.zt,aM=i.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)(aS.l_,{ref:t,className:b("fixed top-0 z-50 flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",a),...l})});aM.displayName=aS.l_.displayName;let aB=(0,j.j)("data-[swipe=move]:transition-none grow-1 group relative pointer-events-auto flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full mt-4 data-[state=closed]:slide-out-to-right-full dark:border-slate-700 last:mt-0 sm:last:mt-4",{variants:{variant:{default:"bg-white border-slate-200 dark:bg-slate-800 dark:border-slate-700",destructive:"group destructive bg-red-600 text-white border-red-600 dark:border-red-600"}},defaultVariants:{variant:"default"}}),aP=i.forwardRef((e,t)=>{let{className:a,variant:l,...i}=e;return(0,n.jsx)(aS.fC,{ref:t,className:b(aB({variant:l}),a),...i})});aP.displayName=aS.fC.displayName,i.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)(aS.aU,{ref:t,className:b("inline-flex h-8 shrink-0 items-center justify-center rounded-md border border-slate-200 bg-transparent px-3 text-sm font-medium transition-colors hover:bg-slate-100 focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-red-100 group-[.destructive]:hover:border-slate-50 group-[.destructive]:hover:bg-red-100 group-[.destructive]:hover:text-red-600 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600 dark:border-slate-700 dark:text-slate-100 dark:hover:bg-slate-700 dark:hover:text-slate-100 dark:focus:ring-slate-400 dark:focus:ring-offset-slate-900 dark:data-[state=open]:bg-slate-800",a),...l})}).displayName=aS.aU.displayName;let aT=i.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)(aS.x8,{ref:t,className:b("absolute right-2 top-2 rounded-md p-1 text-slate-500 opacity-0 transition-opacity hover:text-slate-900 focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600 dark:hover:text-slate-50",a),"toast-close":"",...l,children:(0,n.jsx)(ez.Z,{className:"h-4 w-4"})})});aT.displayName=aS.x8.displayName;let aE=i.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)(aS.Dx,{ref:t,className:b("text-sm font-semibold",a),...l})});aE.displayName=aS.Dx.displayName;let aR=i.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)(aS.dk,{ref:t,className:b("text-sm opacity-90",a),...l})});function aI(){let{toasts:e}=eo();return(0,n.jsxs)(ak,{children:[e.map(e=>{let{id:t,title:a,description:l,action:i,...s}=e;return(0,n.jsxs)(aP,{...s,children:[(0,n.jsxs)("div",{className:"grid gap-1",children:[a&&(0,n.jsx)(aE,{className:"dark:text-white",children:a}),l&&(0,n.jsx)(aR,{className:"dark:text-white-400",children:l})]}),i,(0,n.jsx)(aT,{})]},t)}),(0,n.jsx)(aM,{})]})}aR.displayName=aS.dk.displayName;let aD=e=>{let{children:t}=e,{darkMode:a,accent:l}=ts();return(0,n.jsx)("div",{"data-theme":a?"dark":"light","data-accent":l,children:t})},aA=e=>{let{children:t}=e;return(0,n.jsx)("h3",{className:"scroll-m-20 text-2xl font-semibold tracking-tight",children:t})};var a_=a("7520"),aV=a("9589"),aO=a("5868"),aU=a("4176");let az=()=>{let{setConnectDialogOpen:e}=ts(),{getDevices:t}=d(),a=(0,i.useMemo)(()=>t(),[t]);return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"flex flex-col gap-3 p-3",children:[(0,n.jsx)("div",{className:"flex items-center justify-between",children:(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)(aA,{children:"Connected Devices"}),(0,n.jsx)(Q,{children:"Manage, connect and disconnect devices"})]})}),(0,n.jsx)(aa,{}),(0,n.jsx)("div",{className:"flex h-[450px] rounded-md border border-dashed border-slate-200 p-3 dark:border-slate-700",children:a.length?(0,n.jsx)("ul",{className:"grow divide-y divide-gray-200",children:a.map(e=>{var t,a,l,i,s;return(0,n.jsx)("li",{children:(0,n.jsxs)("div",{className:"px-4 py-4 sm:px-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("p",{className:"truncate text-sm font-medium text-accent",children:(null===(a=e.nodes.get(e.hardware.myNodeNum))||void 0===a?void 0:null===(t=a.user)||void 0===t?void 0:t.longName)??"UNK"}),(0,n.jsxs)("div",{className:"inline-flex w-24 justify-center gap-2 rounded-full bg-slate-100 py-1 text-xs font-semibold text-slate-900 transition-colors hover:bg-slate-700 hover:text-slate-50",children:[(null===(l=e.connection)||void 0===l?void 0:l.connType)==="ble"&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a_.Z,{size:16}),"BLE"]}),(null===(i=e.connection)||void 0===i?void 0:i.connType)==="serial"&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(aV.Z,{size:16}),"Serial"]}),(null===(s=e.connection)||void 0===s?void 0:s.connType)==="http"&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(aO.Z,{size:16}),"Network"]})]})]}),(0,n.jsx)("div",{className:"mt-2 sm:flex sm:justify-between",children:(0,n.jsxs)("div",{className:"flex gap-2 text-sm text-gray-500",children:[(0,n.jsx)(ey.Z,{size:20,className:"text-gray-400","aria-hidden":"true"}),0===e.nodes.size?0:e.nodes.size-1]})})]})},e.id)})}):(0,n.jsxs)("div",{className:"m-auto flex flex-col gap-3 text-center",children:[(0,n.jsx)(aU.Z,{size:48,className:"mx-auto text-textSecondary"}),(0,n.jsx)(aA,{children:"No Devices"}),(0,n.jsx)(Q,{children:"Connect at least one device to get started"}),(0,n.jsxs)(P,{className:"gap-2",onClick:()=>e(!0),children:[(0,n.jsx)(tX.Z,{size:16}),"New Connection"]})]})})]})})},aZ=document.getElementById("root"),aL=(0,s.createRoot)(aZ);(0,l.MD)(),aL.render((0,n.jsx)(i.StrictMode,{children:(0,n.jsx)(()=>{let{getDevice:e}=d(),{selectedDevice:t,setConnectDialogOpen:a,connectDialogOpen:l}=ts(),i=e(t);return(0,n.jsxs)(aD,{children:[(0,n.jsx)(aC,{open:l,onOpenChange:e=>{a(e)}}),(0,n.jsx)(aI,{}),(0,n.jsx)(tf.Ib,{children:(0,n.jsx)(m,{device:i,children:(0,n.jsx)("div",{className:"flex h-screen flex-col overflow-hidden bg-backgroundPrimary text-textPrimary",children:(0,n.jsxs)("div",{className:"flex flex-grow",children:[(0,n.jsx)(ao,{}),(0,n.jsx)("div",{className:"flex flex-grow flex-col",children:i?(0,n.jsxs)("div",{className:"flex h-screen",children:[(0,n.jsx)(av,{}),(0,n.jsx)(t7,{}),(0,n.jsx)(tU,{})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(az,{}),(0,n.jsx)("div",{className:"flex flex-grow"}),(0,n.jsx)(em,{})]})})]})})})})]})},{})}))}},t={};function a(n){var l=t[n];if(void 0!==l)return l.exports;var i=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(i.exports,i,i.exports,a),i.loaded=!0,i.exports}a.m=e,(()=>{var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};a.t=function(n,l){if(1&l&&(n=this(n)),8&l||"object"==typeof n&&n&&(4&l&&n.__esModule||16&l&&"function"==typeof n.then))return n;var i=Object.create(null);a.r(i);var s={};e=e||[null,t({}),t([]),t(t)];for(var o=2&l&&n;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(function(e){s[e]=function(){return n[e]}});return s.default=function(){return n},a.d(i,s),i}})(),a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce(function(t,n){return a.f[n](e,t),t},[]))},a.u=function(e){return"meshtastic/web/js/async/"+e+"."+({675:"2037c508",713:"00f51948"})[e]+".js"},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},(()=>{var e={},t="meshtastic-web:";a.l=function(n,l,i,s){if(e[n]){e[n].push(l);return}if(void 0!==i){for(var o,r,d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var u=d[c];if(u.getAttribute("src")==n||u.getAttribute("data-webpack")==t+i){o=u;break}}}!o&&(r=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,a.nc&&o.setAttribute("nonce",a.nc),o.setAttribute("data-webpack",t+i),o.src=n),e[n]=[l];var m=function(t,a){o.onerror=o.onload=null,clearTimeout(p);var l=e[n];if(delete e[n],o.parentNode&&o.parentNode.removeChild(o),l&&l.forEach(function(e){return e(a)}),t)return t(a)},p=setTimeout(m.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=m.bind(null,o.onerror),o.onload=m.bind(null,o.onload),r&&document.head.appendChild(o)}})(),a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.nmd=function(e){return e.paths=[],!e.children&&(e.children=[]),e},a.nc=void 0,(()=>{var e=[];a.O=function(t,n,l,i){if(n){i=i||0;for(var s=e.length;s>0&&e[s-1][2]>i;s--)e[s]=e[s-1];e[s]=[n,l,i];return}for(var o=1/0,s=0;s<e.length;s++){for(var n=e[s][0],l=e[s][1],i=e[s][2],r=!0,d=0;d<n.length;d++)(!1&i||o>=i)&&Object.keys(a.O).every(function(e){return a.O[e](n[d])})?n.splice(d--,1):(r=!1,i<o&&(o=i));if(r){e.splice(s--,1);var c=l();void 0!==c&&(t=c)}}return t}})(),a.p="/",a.rv=function(){return"1.0.8"},(()=>{var e={980:0};a.f.j=function(t,n){var l=a.o(e,t)?e[t]:void 0;if(0!==l){if(l)n.push(l[2]);else{var i=new Promise(function(a,n){l=e[t]=[a,n]});n.push(l[2]=i);var s=a.p+a.u(t),o=Error();a.l(s,function(n){if(a.o(e,t)&&(0!==(l=e[t])&&(e[t]=void 0),l)){var i=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.src;o.message="Loading chunk "+t+" failed.\n("+i+": "+s+")",o.name="ChunkLoadError",o.type=i,o.request=s,l[1](o)}},"chunk-"+t,t)}}},a.O.j=function(t){return 0===e[t]};var t=function(t,n){var l=n[0],i=n[1],s=n[2],o,r,d=0;if(l.some(function(t){return 0!==e[t]})){for(o in i)a.o(i,o)&&(a.m[o]=i[o]);if(s)var c=s(a)}for(t&&t(n);d<l.length;d++)r=l[d],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(c)},n=self.webpackChunkmeshtastic_web=self.webpackChunkmeshtastic_web||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),a.ruid="bundler=rspack@1.0.8";var n=a.O(void 0,["361","536"],function(){return a("5069")});n=a.O(n)})();